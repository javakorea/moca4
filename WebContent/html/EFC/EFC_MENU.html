<!DOCTYPE html>
<html lang="ko">
<head>
<script>
	$m.EFC_MENU.___ready = function(args){
		$m.EFC_MENU.code({
			"grd_1.depth":{code:'EFC003'}
		},function(){
			$m.EFC_MENU.fn_search();
		});
	};
	
	$m.EFC_MENU.fn_search = function(){
		$m.EFC_MENU.exe({
			url : $m._domain+$m._contextRoot+"/sym/mnu/mpm/EgovMenuManageSelect_json.do",
			loadingbar:true,
            data : {
            	"header" : $m.header,
            	"body" : {aaa:'111',bbb:'222'}
            },			
			callback : function(response){
				var list = $m.EFC_MENU.getResList(response,"list");
				$m.EFC_MENU.drawGrid('grd_1', list);
			}
		});
	};
	$m.EFC_MENU.fn_exe = function(){
		if($m.EFC_MENU.validate("grd_1","status","C,U,D")){
			$m.confirm('저장하시겠습니까?',function(result){
				if(result == 'Y'){
					$m.EFC_MENU.exe({
						url : $m._domain+$m._contextRoot+"/sym/mnu/mpm/EgovMenuManageListModify_json.do",
			            data : {
			            	"header" : $m.header,
			            	"body" : {
			            		paramList:$m.EFC_MENU.getFilteredList("grd_1","status","C,U,D")
			            	}
			            },		
						callback : function(){
			        	   $m.alert('성공적으로 저장되었습니다!',function(){
			        		   $m.EFC_MENU.fn_search();
			        	   	   return;
			        	   });	
						}
					});
				}
			});
		}
	};

	$m.EFC_MENU.fn_callback = function(_json){
		if(_json != null){
			var progrmFileNm = _json["progrmFileNm"];
			var _grd = $m.EFC_MENU.getObj("grd_1");
			$m.EFC_MENU.setCellData(_grd,_grd.getAttribute("selectedRealRowIndex"),"progrmFileNm",progrmFileNm);	
		}
	};
	$m.EFC_MENU.program_popId = 'EFC_PROG_POP';
	$m.EFC_MENU.fn_searchProgram	 = function(_thisObj){
		var o = {};
		o.id = $m.EFC_MENU.program_popId;
		o.url = "/html/EFC/EFC_PROG_POP.html";
		o.type = "POPUP";
		o.modal = "false";
		o.title = '프로그램검색';
		o.callback = $m.EFC_MENU.fn_callback;
		o.scopeId = $m.EFC_MENU.pageId;
		o.data = {};
		
		$m.popup(o,_thisObj);
		
	};
	
</script>

</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap flex fcol">
			<div type="include" class="moca_titbox cm noshbox" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"MOCA_MENU","sreenNm":"메뉴관리","sreenPath":"기준정보관리,메뉴관리"}'
			></div>
			<!-- 
			<div class="moca_shbox">
				<div class="shbox_inner">
					<div class="flex fwrap">
						<div class="tb">
							<span class="tb_th"></span>
							<span class="tb_td">
							</span>
						</div>
					</div>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="$m.EFC_MENU.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			 -->
			<div type="grid" class="moca_grid toolbar fauto mt5" default_cell_height="26px" id="grd_1"
						rendering_div = "true"
						toolbar_search_size="false"
						toolbar_detail="true"
						toolbar_exup="true"
						toolbar_exdn="true"
						toolbar_addrow="true"
						toolbar_delrow="true"
						toolbar_nextbtn="false"
						toolbar_full="true"
						toolbar_grid_button1='{"position":"right","id":"btn_save","label":"저장","onclick":"$m.EFC_MENU.fn_exe","addClass":""}'
						
						label="메뉴목록"
			>
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px" mobileHide="true" hide="false" columnKey="status" thKey="H_status" ><!-- 상태  -->
								<col style="width:140px" mobileHide="false" hide="false" columnKey="treeDepth" thKey="H_treeDepth" ><!-- TREE  -->
								<col style="width:80px" mobileHide="true" hide="false" columnKey="depth" thKey="H_depth" ><!-- LEVEL  -->
								<col style="width:80px" mobileHide="true" hide="false" columnKey="upperMenuId" thKey="H_upperMenuId" ><!-- 상위메뉴  -->
								<col style="width:80px" mobileHide="true" hide="false" columnKey="menuNo" thKey="H_menuNo" ><!-- 메뉴번호  -->
								<col style="width:180px" mobileHide="true" hide="false" columnKey="menuNm" thKey="H_menuNm" ><!-- 메뉴명  -->
								<col style="width:60px" mobileHide="true" hide="false" columnKey="menuOrdr" thKey="H_menuOrdr" ><!-- 순서  -->
								<col style="width:180px" mobileHide="false" hide="false" columnKey="progrmFileNm" thKey="H_progrmFileNm" ><!-- 프로그램파일명  -->
								<col style="width:100px" mobileHide="true" hide="false" columnKey="menuDc" thKey="H_menuDc" ><!-- 설명  -->
								<col style="width:100px" mobileHide="true" hide="false" columnKey="fromDate" thKey="H_fromDate" ><!-- FROMDATE  -->
								<col style="width:100px" mobileHide="true" hide="false" columnKey="toDate" thKey="H_toDate" ><!-- TODATE  -->
								<col style="width:100px" mobileHide="true" hide="false" columnKey="shortCut" thKey="H_shortCut" ><!-- 단축키  -->
						</colgroup>
						<thead>
							<tr>
								<th scope="col" id="H_status">상태</th>
								<th scope="col" id="H_treeDepth">TREE</th>
								<th scope="col" id="H_depth">LEVEL</th>
								<th scope="col" id="H_upperMenuId">상위메뉴</th>
								<th scope="col" id="H_menuNo">메뉴번호</th>
								<th scope="col" id="H_menuNm">메뉴명</th>
								<th scope="col" id="H_menuOrdr">순서</th>
								<th scope="col" id="H_progrmFileNm">프로그램파일명</th>
								<th scope="col" id="H_menuDc">설명</th>
								<th scope="col" id="H_fromDate">FROMDATE</th>
								<th scope="col" id="H_toDate">TODATE</th>
								<th scope="col" id="H_shortCut">단축키</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="status" celltype="input" style="" readOnly="true" name="상태"></td>
								<td id="treeDepth" celltype="tree" levelId="depth" labelId="menuNm" parentNodeId="upperMenuId" nodeId="menuNo" style="text-align:left" name="TREE"></td>
								<td id="depth" celltype="select" style="" required="true" name="LEVEL"></td>
								<td id="upperMenuId" celltype="input" style="" required="true" name="상위메뉴"></td>
								<td id="menuNo" celltype="input" style="" readOnly="true"  required="true" name="메뉴번호"></td>
								<td id="menuNm" celltype="input" style="text-align:left" required="true" name="메뉴명"></td>
								<td id="menuOrdr" celltype="input" style="text-align:center"  required="true" name="순서"></td>
								<td id="progrmFileNm" celltype="inputButton" style="" required="true" callFunction="$m.EFC_MENU.fn_searchProgram" name="프로그램파일명"></td>
								<td id="menuDc" celltype="input" style="" name="설명"></td>
								<td id="fromDate" celltype="input" style="" name="일자시작조건"></td>
								<td id="toDate" celltype="input" style="" name="일자끝조건"></td>
								<td id="shortCut" celltype="input" style="" name="단축키"></td>
							</tr>
						</tbody>
					</table>				
			</div>
		</div>	
	</div>
</div>
</body>
</html>