<!DOCTYPE html>
<html lang="ko">
<head>
<script>
	moca.EFC_BOAD.boardType ='ERP';
	moca.EFC_BOAD.___ready = function(args){
		if(moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
	    	moca.hide(moca.EFC_BOAD.getObj("btn_del_admin"));
	    }
	    moca.EFC_BOAD.fn_search();
	};
	
	moca.EFC_BOAD.fn_search = function(){
	    moca.EFC_BOAD.exe({
	        url : moca._domain+moca._contextRoot+"/EFC_BOAD/selectBoardList.do",
	        loadingbar:true,
	        data : {
	            "header" : moca.header,
	            "body" : {
	            	"BOAD_TYPE":moca.EFC_BOAD.boardType,
	            	"BOAD_WRITER":moca.EFC_BOAD.getInput("ipt_WRITER"),
	            	"BOAD_TITLE":moca.EFC_BOAD.getInput("ipt_TITLE"),
	            	"FROM":moca.EFC_BOAD.getFrom("CREATE_DTTM").replace(/-/g,''),
                    "TO":moca.EFC_BOAD.getTo("CREATE_DTTM").replace(/-/g,'')
	            }
	        },          
	        callback : function(response){
	        	var money = '200,000'
	            moca.EFC_BOAD.drawGrid('grd_1',moca.getResList(response,"selectBoardList"));
	        }
	    });
	};
	
	moca.EFC_BOAD.popId = "EFC_BOAD_POP";
	moca.EFC_BOAD.fn_pop = function(_thisObj){
	    ['글쓰기 팝업']
	    var o = {};
	    o.id = moca.EFC_BOAD.popId2;
	    o.url = '/html/EFC/EFC_BOAD_POP.html';
	    o.type = "POPUP";
	    o.modal = "false";
	    o.title = '게시물작성';
	    o.callback = moca.EFC_BOAD.fn_pop_callback;
	    o.scopeId = moca.EFC_BOAD.pageId;
	    o.data = {popTitle:"게시물작성","BOAD_TYPE":moca.EFC_BOAD.boardType};
	    moca.popup(o,_thisObj);
	};
	moca.EFC_BOAD.grd_1__onDblClick = function(_grd,rowIndex,colIndex,colId){
	    ['게시글상세']
	    var _BoardTitle = _grd.list[rowIndex].BOAD_TITLE;
	    var _BoardIdx = moca.getCellData(_grd,rowIndex,'BOAD_IDX');
	    var __BoardParentIdx;
	    if( moca.getCellData(_grd,rowIndex,'BOAD_PIDX') != null){
	    	 __BoardParentIdx = moca.getCellData(_grd,rowIndex,'BOAD_PIDX');
	    }else{
	    	__BoardParentIdx = '';
	    }
	    var o = {};
	    o.id = moca.EFC_BOAD.popId;
	    o.url = '/html/EFC/EFC_BOAD_POP.html';
	    o.type = "POPUP";
	    o.modal = "false";
	    o.title = '게시글상세';
	    o.callback = moca.EFC_BOAD.fn_pop_callback;
	    o.scopeId = moca.EFC_BOAD.pageId;
	    o.data = {"BOAD_IDX":_BoardIdx+'',"BOAD_PIDX":__BoardParentIdx+'',"BOAD_TITLE":_BoardTitle,"BOAD_TYPE":moca.EFC_BOAD.boardType};
	    moca.popup(o,_grd);
	};
	moca.EFC_BOAD.fn_adminDelList = function(){
		['게시글 물리삭제 관리자삭제']
        if(moca.EFC_BOAD.validate("grd_1","status","C,U,D")){
       		moca.confirm('삭제하시면 데이터를 더이상 복구하실 수 없습니다.<br/>또한 원글을 삭제하실경우 답글까지도 삭제됩니다.<br/>그래도 삭제하시겠습니까?',function(result){
                   if(result == 'Y'){
                       moca.EFC_BOAD.exe({
                           url : moca._domain+moca._contextRoot+"/EFC_BOAD/deleteBoardList.do",
                           data : {
                               "header" : moca.header,
                               "body" : {
                                   paramList:moca.getCheckedData(moca.EFC_BOAD.getObj("grd_1"),"chk")
                               }
                           },      
                           callback : function(){
                              moca.alert('성공적으로 삭제되었습니다!',function(){
                                  moca.EFC_BOAD.fn_search();
                                  return;
                              });  
                           }
                       });
                   }
               });
        }
    };
    moca.EFC_BOAD.fn_delList = function(){
		['게시글 삭제']
        if(moca.EFC_BOAD.validate("grd_1","status","C,U,D")){
       		moca.confirm('원글을 삭제하실경우 답글까지도 삭제됩니다.<br/>선택된 목록들을 삭제하시겠습니까?',function(result){
                   if(result == 'Y'){
                       moca.EFC_BOAD.exe({
                           url : moca._domain+moca._contextRoot+"/EFC_BOAD/deleteStatusBoardList.do",
                           data : {
                               "header" : moca.header,
                               "body" : {
                                   paramList:moca.getCheckedData(moca.EFC_BOAD.getObj("grd_1"),"chk")
                               }
                           },      
                           callback : function(){
                              moca.alert('성공적으로 삭제되었습니다!',function(){
                                  moca.EFC_BOAD.fn_search();
                                  return;
                              });  
                           }
                       });
                   }
               });
        }
    };
    moca.EFC_BOAD.dispCnt= function(_thisVal){
    	if(_thisVal !=null && _thisVal != 0){
    		return _thisVal;
    	}else{
    		_thisVal = '';
    		return _thisVal;
    	}
    }
    
    moca.EFC_BOAD.dispReply= function(_thisVal, _grd, _realrow){
    	if(_grd.list[_realrow].BOAD_IDX != _grd.list[_realrow].BOAD_PIDX){
    		return "<i class='reply'></i>"+_thisVal;
    	}else{
    		return _thisVal;
    	}
    }
    
    moca.EFC_BOAD.disabled= function(_thisVal, _grd, _realrow){
    	if(_grd.list[_realrow].BOAD_WRITER != moca.getSs("USER_ID") && moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
    		return true;
    	}else{
    		return false;
    	}
    }
    
    moca.EFC_BOAD.fn_check = function(_thisVal, _grd, _realrow){
		alert('');debugger;    	
    }
</script>

</head>
<body>
	
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"EFC_BOAD","sreenNm":"업무게시판","sreenPath":"시스템설정,업무게시판"}'
			></div>
			<div class="moca_shbox">
				<div class="shbox_inner">
					<table class="tb">
						<tbody>
							<tr>
								<th class="tb_th pr10">조회일자</th>
								<td class="tb_td">
									<div type="inputMultiCalendar" class="moca_ica fl" style="width:auto" id="CREATE_DTTM" displayFormat="####-##-##" 
                                        defaultValue="12개월전" 
                                        selecterItem="오늘,3일전,6일전"
                                        showRadioOption="false"
                                    ></div>
								</td>
								
								<th class="tb_th pr10">작성자</th>
								<td class="tb_td">
									<input type="text" class="moca_input sh" style="width:100px" id="ipt_WRITER"  autocomplete="off" onkeyup="moca.default_keyup(this)">
								</td>							
								
								<th class="tb_th pr10">제목</th>
								<td class="tb_td">
									<input type="text" class="moca_input sh" style="width:250px" id="ipt_TITLE"  autocomplete="off" onkeyup="moca.default_keyup(this)">
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.EFC_BOAD.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			<div type="grid" class="moca_grid toolbar sc_row1" default_cell_height="26px" id="grd_1" rowSelectedColor="#434e5f"
			
								toolbar_search_size="false"
								toolbar_detail="true"
								toolbar_exup="false"
								toolbar_exdn="true"
								toolbar_addrow="false"
								toolbar_delrow="false"
								toolbar_nextbtn="false"
								toolbar_full="true"
								toolbar_grid_button1='{"position":"right","id":"btn_add","label":"글쓰기","onclick":"moca.EFC_BOAD.fn_pop","addClass":"","innerDisabled":"false"}'
								toolbar_grid_button2='{"position":"right","id":"btn_del","label":"선택삭제","onclick":"moca.EFC_BOAD.fn_delList","addClass":"","innerDisabled":"false"}'
								toolbar_grid_button3='{"position":"right","id":"btn_del_admin","label":"관리자삭제","onclick":"moca.EFC_BOAD.fn_adminDelList","innerStyle":"background:#ff3333","innerDisabled":"false"}'
								toolbar_grid_label_span='{"position":"left","id":"todayCnt","label":"총금액","value":"200,000원","valueClass":"txt_blue"}'
                                onDblClick = "moca.EFC_BOAD.grd_1__onDblClick"
								label="게시물"
			
			>
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px">
								<!-- <col style="width:60px"> -->
								<col style="width:60px">
								<col style="width:60px">
								<col style="width:60px">
								<col style="">
								<col style="width:60px">
								<col style="width:200px">
								<col style="width:150px">		
						</colgroup>
						<thead>
							<tr>
								<th scope="col" celltype="checkbox" id="H_chk" targetId="chk">선택</th>
								<!--<th scope="col" id="H_BOAD_TYPE">게시판유형</th> -->
								<th scope="col" id="H_BOAD_PIDX">부모ID</th>
								<th scope="col" id="H_BOAD_IDX">ID</th>
								<th scope="col" id="H_BOAD_STATUS">상태</th>
								<th scope="col" id="H_BOAD_TITLE">제목</th>
								<th scope="col" id="H_BOAD_FILECNT">첨부</th>
								<th scope="col" id="H_BOAD_WRITER"  filterable="true" filterableId="BOAD_WRITER">작성자</th>
								<th scope="col" id="H_BOAD_DATE">작성일시</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="chk" celltype="checkbox" style="" trueValue="1" falseValue="0" name="선택" disabledFunction="moca.EFC_BOAD.disabled" ></td>
								<!--<td id="BOAD_TYPE" celltype="input" style="text-align:center" name="ID" readOnly="true"></td> -->
								<td id="BOAD_PIDX" celltype="input" style="text-align:center" name="ID" readOnly="true"></td>
								<td id="BOAD_IDX" celltype="input" style="text-align:center" name="ID" readOnly="true"></td>
								<td id="BOAD_STATUS" celltype="input" style="text-align:center" name="상태" readOnly="true"></td>
								<td id="BOAD_TITLE" celltype="input" style="text-align:left" name="제목" readOnly="true" displayFunction="moca.EFC_BOAD.dispReply"></td>
								<td id="CNT" celltype="input" style="" name="첨부" readOnly="true" displayFunction="moca.EFC_BOAD.dispCnt"></td>
								<td id="BOAD_WRITER" celltype="input" style="text-align:center" name="작성자" readOnly="true"></td>
								<td id="BOAD_DATE" celltype="input" style="" name="작성일" readOnly="true" displayFunction="moca.longToDate"></td>
							</tr>
						</tbody>
					</table>				
			</div>
		</div>	
	</div>
</div>
</body>
</html>