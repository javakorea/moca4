<!DOCTYPE html>
<html lang="ko">
<head>
<script>
	
	moca.EFC_USER.___ready = function(args){
		moca.EFC_USER.code({
			"grd_1.sttus":{code:'COM013',allOption:{label:'-선택-',value:''}},
			"grd_1.passwordHint":{code:'COM022',allOption:{label:'-선택-',value:''}}
		},function(){
			moca.EFC_USER.fn_codes();
		});			
	};
	
	moca.EFC_USER.fn_codes = function(){
		moca.EFC_USER.exe({
			url : moca._domain+moca._contextRoot+"/uss/umt/user/selectGroupIdDetail.do",
			loadingbar:false,
            data : {
            	"header" : moca.header,
            	"body" : {}
            },			
			callback : function(response){
				var g_obj = moca.EFC_USER.getObj('grd_1');
				if(g_obj['groupId'] == undefined){
					g_obj['groupId'] = {};
					g_obj['groupId']['codeOpt'] = {allOption:{label:'-선택-',value:''}};
				} 
				g_obj['groupId']['list'] = response.list;
				
				moca.EFC_USER.exe({
					url : moca._domain+moca._contextRoot+"/uss/umt/user/selectOgrnztIdDetail.do",
					loadingbar:false,
		            data : {
		            	"header" : moca.header,
		            	"body" : {}
		            },			
					callback : function(response2){
						var g_obj = moca.EFC_USER.getObj('grd_1');
						if(g_obj['orgnztId'] == undefined){
							g_obj['orgnztId'] = {};
							g_obj['orgnztId']['codeOpt'] = {allOption:{label:'-선택-',value:''}};
						} 
						if(response2.list == null){
							g_obj['orgnztId']['list'] = [];
						}else{
							g_obj['orgnztId']['list'] = response2.list;
						}
						
						moca.EFC_USER.fn_search();
					}
				});
			}
		});
	};
		
		
	moca.EFC_USER.fn_search = function(){
		moca.EFC_USER.exe({
			url : moca._domain+moca._contextRoot+"/uss/umt/user/EgovUserManage_json.do",
			loadingbar:true,
            data : {
            	"header" : moca.header,
            	"body" : {userId:moca.EFC_USER.getInput("userId"),userNm:moca.EFC_USER.getInput("userNm")}
            },			
			callback : function(response){
				var authorManageList = moca.EFC_USER.getResList(response,"authorManageList");
				var g_obj = moca.EFC_USER.getObj('grd_1');
				if(g_obj['authorCode'] == undefined){
					g_obj['authorCode'] = {};
					g_obj['authorCode']['codeOpt'] = {allOption:{label:'-선택-',value:''},metaInfo:{codeCd:"authorCode",codeNm:"authorNm"}};
				} 
				g_obj['authorCode']['list'] = authorManageList;
				var list = moca.EFC_USER.getResList(response,"list");
				moca.EFC_USER.drawGrid('grd_1', list);
			}
		});
	};
	moca.EFC_USER.fn_exe = function(){
		if(moca.EFC_USER.validate("grd_1","status","C,U,D")){
			moca.confirm('저장하시겠습니까?',function(result){
				if(result == 'Y'){
					moca.EFC_USER.exe({
						url : moca._domain+moca._contextRoot+"/uss/umt/user/EgovUserModify_json.do",
			            data : {
			            	"header" : moca.header,
			            	"body" : {
			            		paramList:moca.EFC_USER.getFilteredList("grd_1","status","C,U,D")
			            	}
			            },		
						callback : function(){
			        	   moca.alert('성공적으로 저장되었습니다!',function(){
			        		   moca.EFC_USER.fn_search();
			        	   	   return;
			        	   });	
						}
					});
				}
			},'확인','취소');
		}
	};
	
	
	moca.EFC_USER.selectChanged = function(row,col,beforeCode,beforeText,afterCode,afterText){
		var grd = moca.EFC_USER.getObj('grd_1');
		moca.setCellData(grd,row,'etc',beforeText+' to '+afterText);
	};
</script>

</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"EFC_USER","sreenNm":"사용자관리","sreenPath":"기준정보관리,사용자관리"}'
			></div>
			<div class="moca_shbox">
				<div class="shbox_inner">
					<table class="tb">
						<tbody>
							<tr>
								<th class="tb_th pr10">아이디</th>
								<td class="tb_td">
									<input type="text" class="moca_input sh" style="width:150px" id="userId" autocomplete="off" onkeyup="moca.default_keyup(this)">
								</td>
								
								<th class="tb_th pr10">이름</th>
								<td class="tb_td">
									<input type="text" class="moca_input sh" style="width:150px" id="userNm" autocomplete="off" onkeyup="moca.default_keyup(this)">
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.EFC_USER.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			
			<div type="grid" class="moca_grid toolbar sc_row1" default_cell_height="26px" id="grd_1"
								toolbar_search_size="false"
								toolbar_detail="true"
								toolbar_exup="true"
								toolbar_exdn="true"
								toolbar_addrow="true"
								toolbar_delrow="true"
								toolbar_nextbtn="false"
								toolbar_full="true"
								toolbar_grid_button1='{"position":"right","id":"btn_save","label":"저장","onclick":"moca.EFC_USER.fn_exe","addClass":""}'
								onSelectChanged="moca.EFC_USER.selectChanged"
								label="사용자목록"

			>
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px">
								<col style="width:80px">
								<col style="width:70px">
								<col style="width:100px">
							<!-- 	<col style="width:100px"> -->
								<col style="width:240px">
<!-- 								<col style="width:120px">
								<col style="width:220px"> -->						
								<!-- <col style="width:150px"> --><!-- group id -->
								<!-- <col style="width:170px"> --><!-- 회원상태 -->
								<col style="width:170px"><!-- 등록일 -->
								<col style="width:100px">
							<!-- 	<col style="width:150px"> -->
								<col style="width:250px">
								<!-- <col style="width:100px">	 -->	
								<col style="width:170px">					
								<col style="width:170px">
<!-- 								<col style="width:200px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:200px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="width:100px">
								<col style="">	 -->									
						</colgroup>
						<thead>
							<tr>
								<th scope="col" id="lv0" sortable="true">상태</th>
								<th scope="col" id="lv1" sortable="true">아이디</th>
								<th scope="col" id="lv2" sortable="true">이름</th>
								<th scope="col" id="lv2" sortable="true">권한</th>
								<!-- <th scope="col" id="lv23" sortable="true">조직코드</th> -->
								<th scope="col" id="lv24">비밀번호(저장 시 암호화됨)</th>
<!-- 								<th scope="col" id="lv25">비밀번호정답</th>
								<th scope="col" id="lv26" filterable="true" filterableId="passwordHint">비밀번호힌트</th> -->
<!-- 								<th scope="col" id="lv3" sortable="true">그룹아이디</th>
								<th scope="col" id="lv6" sortable="true" filterable="true" filterableId="sttus">회원상태</th> -->
								<th scope="col" id="lv8" sortable="true">등록일</th>
								<th scope="col" id="lv4">핸드폰번호</th>
							<!-- 	<th scope="col" id="lv5">유니크아이디</th>	 -->							
								<th scope="col" id="lv7">E-MAIL</th>
								<!-- <th scope="col" id="lv31">사용자구분</th> -->
								<th scope="col" id="lv32">만료일</th>
								<th scope="col" id="lv33">비고</th>
								
<!-- 								<th scope="col" id="lv9">집전화지역번호</th>
								<th scope="col" id="lv10">생년월일</th>
								<th scope="col" id="lv11">crtfcDnValue</th>
								<th scope="col" id="lv12">detailAdres</th>
								<th scope="col" id="lv13">emplNo</th>
								<th scope="col" id="lv14">endTelno</th>
								<th scope="col" id="lv15">fxnum</th>
								<th scope="col" id="lv16">houseAdres</th>
								<th scope="col" id="lv17">houseEndTelno</th>
								<th scope="col" id="lv18">ihidnum</th>
								<th scope="col" id="lv19">mbtlnum</th>
								<th scope="col" id="lv20">middleTelno</th>
								<th scope="col" id="lv21">직위명</th>
								<th scope="col" id="lv22">사무실전화번호</th>
								<th scope="col" id="lv27">pstinstCode</th>
								<th scope="col" id="lv28">sexdstnCode</th>
								<th scope="col" id="lv29">userTy</th>
								<th scope="col" id="lv30">zip</th> -->
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="status" celltype="input" style="" readOnly="true" name="상태"></td>
								<td id="userId" celltype="input" style="" readOnly="true"  required="true" name="아이디"></td>
								<td id="userNm" celltype="input" style="" readOnly="true"  required="true" name="이름"></td>
								<td id="authorCode" celltype="select" style="" name="권한" required="true" ></td>
							<!-- 	<td id="orgnztId" celltype="select" style=""  required="true" name="조직코드"></td> -->
								<td id="password" celltype="input" style="" required="true" name="비밀번호" ></td>
<!-- 								<td id="passwordCnsr" celltype="input" style="text-align:left" readOnly="true"  required="true" name="비밀번호정답"></td>
								<td id="passwordHint" celltype="select" style="text-align:left" readOnly="true" required="true" name="비밀번호힌트" ></td> -->
<!-- 								<td id="groupId" celltype="select" style="" required="true" name="그룹아이디"></td>
								<td id="sttus" celltype="select" style=""  displayFormat="[value] [label]" required="true" name="회원상태"></td> -->
								<td id="sbscrbDe" celltype="input" style="" readOnly="true"	displayFunction="moca.longToDate" addRowEditable="false" name="등록일"></td>
								<td id="moblphonNo" celltype="input" style="" name="핸드폰번호"></td>
							<!-- 	<td id="uniqId" celltype="input" style="" readOnly="true" toolTip="true" addRowEditable="false" name="유니크아이디"></td>	 -->							
								<td id="emailAdres" celltype="input" style=""  toolTip="true" name="E-MAIL"></td>
								<!-- <td id="userType" celltype="select" style="" readOnly="false" name="사용자구분"></td> -->
								<td id="endDate" celltype="input" style="text-align:center" readOnly="false" name="만료일" ></td>
								<td id="etc" celltype="input" style="text-align:center" readOnly="false" name="비고" ></td>
								
<!-- 								<td id="areaNo" celltype="input" style="" readOnly="true"  ></td>
								<td id="brthdy" celltype="input" style="" readOnly="true"  ></td>
								<td id="crtfcDnValue" celltype="input" style="" readOnly="true"  ></td>
								<td id="detailAdres" celltype="input" style="" readOnly="true"  ></td>
								<td id="emplNo" celltype="input" style="" readOnly="true"  ></td>
								<td id="endTelno" celltype="input" style="" readOnly="true"  ></td>
								<td id="fxnum" celltype="input" style="" readOnly="true"  ></td>
								<td id="houseAdres" celltype="input" style="" readOnly="true"  ></td>
								<td id="houseEndTelno" celltype="input" style="" readOnly="true"  ></td>
								<td id="ihidnum" celltype="input" style="" readOnly="true"  ></td>
								<td id="mbtlnum" celltype="input" style="" readOnly="true"  ></td>
								<td id="middleTelno" celltype="input" style="" readOnly="true"  ></td>
								<td id="ofcpsNm" celltype="input" style="" readOnly="true"  ></td>
								<td id="offmTelno" celltype="input" style="" readOnly="true"  ></td>
								<td id="pstinstCode" celltype="input" style="" readOnly="true"  ></td>
								<td id="sexdstnCode" celltype="input" style="" readOnly="true"  ></td>
								<td id="userTy" celltype="input" style="" readOnly="true"  ></td>
								<td id="zip" celltype="input" style="" readOnly="true"  ></td> -->
							</tr>
						</tbody>
					</table>				
			</div>

		</div>	
	</div>
</div>
</body>
</html>