<!DOCTYPE html>
<html lang="ko">
<head>
<script>
	moca.EFC_ULOG.___ready = function(){
		moca.EFC_ULOG.code({},function(){
			moca.EFC_ULOG.exe({
				url : moca._domain+moca._contextRoot+"/efms/EFC_CORP/list_json.do",
				loadingbar:true,
	            data : {
	            	"header" : moca.header,
	            	"body" : {aaa:'111',bbb:'222'}
	            },			
				callback : function(response){
					var g_obj = moca.EFC_ULOG.getObj('grd_1');
					if(g_obj['CORP_CD'] == undefined){
						g_obj['CORP_CD'] = {};
						g_obj['CORP_CD']['codeOpt'] = {allOption:{label:'-선택-',value:''},metaInfo:{codeCd:"CORP_CD",codeNm:"CORP_NM"}};
					} 
					g_obj['CORP_CD']['list'] = response.list;
					moca.EFC_ULOG.fn_search();
				}
			});	
		});
	};
	
	moca.EFC_ULOG.fn_search = function(_pageNum){
		moca.EFC_ULOG.exe({
			url : moca._domain+moca._contextRoot+"/efms/EFC_ULOG/list_json.do",
            data : {
            	"header" : moca.header,
            	"body" : {
            		"limitFrom" : moca.getLimitFrom(moca.EFC_ULOG.getObj('grd_1')),
	        		"limitPerPage" : moca.getLimitPerPage(moca.EFC_ULOG.getObj('grd_1')),
            		USER_ID:moca.getValue(moca.EFC_ULOG.getObj( "USER_ID")),
            		FROM:moca.EFC_ULOG.getFrom("ipc_3"),
            		TO:moca.EFC_ULOG.getTo("ipc_3"),
            	}
            },			
			callback : function(response){
				moca.EFC_ULOG.drawGrid('grd_1', moca.EFC_ULOG.getResList(response,"list"),response);
			}
		});
	};
	moca.EFC_ULOG.fn_exe = function(){
		if(moca.EFC_ULOG.validate("grd_1","status","C,U,D")){
			moca.confirm('저장하시겠습니까?',function(result){
				if(result == 'Y'){
					moca.EFC_ULOG.exe({
						url : moca._domain+moca._contextRoot+"/efms/EFGPROP/modify_json.do",
			            data : {
			            	"header" : moca.header,
			            	"body" : {
			            		paramList:moca.EFC_ULOG.getFilteredList("grd_1","status","C,U,D")
			            	}
			            },		
						callback : function(){
			        	   moca.alert('성공적으로 저장되었습니다!',function(){
			        		   moca.EFC_ULOG.fn_search();
			        	   	   return;
			        	   });	
						}
					});
				}
			});
		}
	};
</script>

</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap flex fcol">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"EFC_ULOG","sreenNm":"사용자로그","sreenPath":"시스템설정,사용자로그"}'
			></div>

			<div class="moca_shbox">
				<div class="shbox_inner">
					<div class="flex fwrap">
						<div class="tb">
							<span class="tb_th">사용기간</span>
							<span class="tb_td">
								<div type="inputMultiCalendar" class="moca_ica fl" style="width:auto" id="ipc_3" displayFormat="####-##-##" 
		                               defaultValue="당분기" 
		                               selecterItem="오늘,3일전,6일전"
		                               showRadioOption="false"
		                         ></div>							
							</span>
						</div>
						<div class="tb">
							<span class="tb_th">사용자아이디</span>
							<span class="tb_td">
								<div type="input" id="USER_ID" keyMask="enterSearchEvt" class="mocaInput sh"  style=""  disabled="false" readonly="false"></div>
							</span>
						</div>
					</div>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.EFC_ULOG.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			
			
			<div type="grid" class="moca_grid toolbar fauto mt12" default_cell_height="26px" id="grd_1" rowSelectedColor="#434e5f"
			
								toolbar_search_size="false"
								toolbar_detail="true"
								toolbar_exup="false"
								toolbar_exdn="true"
								toolbar_addrow="false"
								toolbar_delrow="false"
								toolbar_nextbtn="false"
								toolbar_full="true"
								
								label="사용로그목록"
								paging='{"type":"numberList","listCntPerPage":"27","totalCntKey":"selectTotalCnt_EFGULOG","onPageClick":"moca.EFC_ULOG.fn_search", "pageGroupItemMax":"10"}'
								
			>
					<table style="width: 100%">
						<colgroup>
								<!-- <col style="width:60px"> -->
								<col style="width:160px">
								<col style="width:60px">
								<col style="width:160px">
								<!-- <col style="width:160px"> -->
								<!-- <col style="width:60px">	 -->
								<col style="">								
						</colgroup>
						<thead>
							<tr>
								<!-- <th scope="col" id="lv0">상태</th> -->
								<!-- <th scope="col" id="lv1">법인</th> -->
								<th scope="col" id="lv3" sortable="true">사용일시</th>
								<th scope="col" id="lv2" sortable="true">사용자</th>
								<th scope="col" id="lv4" sortable="true">항목</th>
								<!-- <th scope="col" id="lv5" sortable="true">URL</th> -->
								<!-- <th scope="col" id="lv6" sortable="true">SRCID</th> -->
								<th scope="col" id="lv7" >로그</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<!-- <td id="status" celltype="input" style="" readOnly="true" name="상태"></td> -->
								<!-- <td id="CORP_CD" celltype="select" style="text-align:center" readOnly="true" name="법인"></td> -->
								<td id="LAST_UPDT_PNTTM" celltype="input" style="" readOnly="true" name="사용일시" displayFunction="moca.longToDate"></td>
								<td id="USER_ID" celltype="input" style="" readOnly="true" name="사용자"></td>
								<td id="MENU_NM" celltype="input" style="text-align:left" readOnly="true" name="메뉴명"></td>
								<!-- <td id="URL" celltype="input"  style="text-align:left"  readOnly="true" name="URL"></td> -->
								<!-- <td id="SRCID" celltype="input"  style="text-align:left"  readOnly="true" name="SRCID"></td> -->
								<td id="LABEL" celltype="input" style="text-align:left" readOnly="true" name="LABEL" tooltip="true"></td>
							</tr>
						</tbody>
					</table>				
			</div>
		</div>	
	</div>
</div>
</body>
</html>