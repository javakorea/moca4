<!DOCTYPE html>
<html lang="ko">
<head meta_width="1400px" meta_height="700px">
<script>
moca.EFC_BOAD_HIS_POP.editor;
moca.EFC_BOAD_HIS_POP.___ready = function(args){
	if(args != null){
		moca.EFC_BOAD_HIS_POP.args = args;
	}
	moca.EFC_BOAD_HIS_POP.fn_search();
    CKEDITOR.on('instanceReady', function(ev) {
    	moca.EFC_BOAD_HIS_POP.editor = ev.editor;
    	if(_boardIdx != null){
    		moca.EFC_BOAD_HIS_POP.editor.setReadOnly(true);
    	}
    	$('#contents').show();
    });
    
};
moca.EFC_BOAD_HIS_POP._boardIdx;
moca.EFC_BOAD_HIS_POP.fn_search = function(_grd,_idx,tdObj,_thisObj){
	_boardIdx = moca.EFC_BOAD_HIS_POP.args.parent.data.BOADHIS_IDX;
	var _BoardTitle = moca.EFC_BOAD_HIS_POP.args.parent.data.BOAD_TITLE;
		moca.EFC_BOAD_HIS_POP.exe({
			url : moca._domain+moca._contextRoot+"/EFC_BOAD_HIS/selectBoardHisInfo.do",
			loadingbar:false,
			data : {
				"header" : moca.header,
				"body" : {
					"BOADHIS_IDX":_boardIdx
					}
			},			
			callback : function(response){
				//if(response.selectBoardList != null && response.selectBoardList.length > 0)
					if(response.selectBoardHisInfo != null ){
					var data = response.selectBoardHisInfo;
					var argdata = moca.EFC_BOAD_HIS_POP.args.parent.data;
					CKEDITOR.replace( 'editor',{uiColor:'#e5e8ef',on:{
						'instanceReady':function(evt){
							//CKEDITOR.instances.editor.focus();
					}}}	);
					CKEDITOR.instances.editor.setData(data.BOAD_CONT);
					moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("wtitle"),data.BOAD_TITLE);
					moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("wdate"),data.BOADHIS_DATE);
					moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("wid"),data.BOAD_WRITER);
					moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("whisidx"),data.BOADHIS_IDX);
				    moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("widx"),data.BOAD_IDX);
				    moca.setValue(moca.EFC_BOAD_HIS_POP.getObj("wstatus"),argdata.BOADHIS_STATUS);
				    moca.hide(moca.EFC_BOAD_HIS_POP.getObj("btn_save"));
				    if(moca.getValue(moca.EFC_BOAD_HIS_POP.getObj("wid")) != moca.getSs("USER_ID") && moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
				    	moca.hide(moca.EFC_BOAD_HIS_POP.getObj("btn_update"));
				    	moca.hide(moca.EFC_BOAD_HIS_POP.getObj("btn_del"));
				    }
				}else{
					moca.error(response.error);
				}
			}
		});
};

</script>
<style>
</style>
</head>
<body>
	<div class="moca_pop_cont_wrap" style="display:none" id="contents">
		<div type="form" id="form_3" class="moca_table toolbar" style=""
				label="게시물작성"
				showRowSelection="false"
				addition='[
					]'
				>
					<table class="moca_table_cont" style="">
						<colgroup>
								<col style="width:80px">
								<col style="width:80px">
								<col style="width:80px">
								<col style="">
								<col style="width:200px">
								<col style="width:120px">
						</colgroup>
						<thead>
							<tr>
								<th>이력ID</th>
								<th>게시판ID</th>
								<th>이력상태</th>
								<th>제목</th>
								<th>작성일시</th>
								<th>작성자</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>
									<div type="input" id="whisidx" class="mocaInput" innerClass="tac" onclick="" style="" value="" readonly="true"></div>
								</td>
								<td>
                                    <div type="input" id="widx" class="mocaInput" innerClass="tac" onclick="" style="" value="" readonly="true"></div>
                                </td>
                                <td>
                                    <div type="input" id="wstatus" class="mocaInput" innerClass="tac" onclick="" style="" value="" readonly="true"></div>
                                </td>
								<td>
									<div type="input" class="mocaInput req" style="width:100%;" innerStyle="" id="wtitle" displayFormat=""  readonly="true"
										defaultValue="" 
										selecterItem=""
										showRadioOption="false"
									></div>
								</td>
								<td>
									<div type="input" class="mocaInput" style="width:100%;text-align:center;" innerStyle="text-align:center;" id="wdate" displayFunction="moca.dateFormat"  readonly="true"
										defaultValue="" 
										selecterItem=""
										showRadioOption="false"
									></div>
								</td>
								<td>
									<div type="input" class="mocaInput" style="width:100%;text-align:center;" innerStyle="text-align:center;" id="wid" displayFormat=""  readonly="true"
										defaultValue="" 
										selecterItem=""
										showRadioOption="false"
									></div>
								</td>
							</tr>  
						</tbody>
					</table>
					<div class="mt10 terms_edit">
						<div contenteditable="true" placeholder="" id="editor"  style="height:150px"></div>
					</div>
		</div>

		
	</div>
</body>
</html>