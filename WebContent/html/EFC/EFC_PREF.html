<!DOCTYPE html>
<html lang="ko">
<head>
<script>
	
	$(document).ready(function() {
		$m.init(function(){
			$m.EFC_PREF.code({
				"grd_1.useAt":{code:'EFC001'}
			},function(){
				$m.EFC_PREF.fn_search();
			});
		});
	});
	
	$m.EFC_PREF.fn_search = function(){
		$m.EFC_PREF.exe({
			url : $m._domain+$m._contextRoot+"/sym/ccm/cca/EgovCcmCmmnCodeList_json.do",
            data : {
            	"header" : $m.header,
            	"body" : {aaa:'111',bbb:'222'}
            },			
			callback : function(response){
				$m.drawGrid('grd_1', $m.EFC_PREF.getResList(response,"list"));
			}
		});
	};
	$m.EFC_PREF.fn_exe = function(){
		if($m.EFC_PREF.validate("grd_1","status","C,U,D")){
			$m.EFC_PREF.confirm('저장하시겠습니까?',function(result){
				if(result == 'Y'){
					$m.EFC_PREF.exe({
						url : $m._domain+$m._contextRoot+"/sym/ccm/cca/EgovCcmCmmnCodeModify_json.do",
			            data : {
			            	"header" : $m.header,
			            	"body" : {
			            		paramList:$m.EFC_PREF.getFilteredList("grd_1","status","C,U,D")
			            	}
			            },		
						callback : function(){
			        	   $m.alert('성공적으로 저장되었습니다!',function(){
			        		   $m.EFC_PREF.fn_search();
			        	   	   return;
			        	   });	
						}
					});
				}
			});
		}
	};
</script>

</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap">
			<div class="moca_titbox cm">
				<a class="btn_fav" data-href="" style="cursor: default;">즐겨찾기</a>
				<h4 class="mr5">EFC_PREF</h4>
				<h3>시스템설정</h3>
				<div class="title_box_nav">
					<em class="mr7"><i class="fas fa-grip-lines-vertical"></i></em>
					<img src="../../images/ico_home.png" class="mr7">
					<em class="mr7"><i class="fas fa-angle-right"></i></em>
					<span class="mr7">시스템설정</span>
					<em class="mr7"><i class="fas fa-angle-right"></i></em>
					<span class="mr7">시스템설정</span>
				</div>
				<div class="btns_wrap">
					<div class="grp_funcbtns">
						<a class="btn" href="javascript:void(0)" onclick="$m.EFC_PREF.fn_exe()">처리</a>
					</div>
					<div class="grp_combtns">
						<a class="btn reset">화면지움</a>
					</div>
				</div>
			</div>
			<div class="moca_shbox">
				<div class="shbox_inner">
					<table class="tb">
						<tbody>
							<tr>
								<th class="tb_th pr10">시스템명</th>
								<td class="tb_td">
									<input type="text" class="moca_input sh" style="width:150px">
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="$m.EFC_PREF.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			
			<div type="grid" class="moca_grid toolbar sc_row1" default_cell_height="26px" id="grd_1" rowSelectedColor="#434e5f">
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px">
								<col style="width:120px">
								<col style="">		
								<col style="width:110px">								
						</colgroup>
						<thead>
							<tr>
								<th scope="col" id="lv0">상태</th>
								<th scope="col" id="lv1">코드아이디</th>
								<th scope="col" id="lv2">코드명</th>
								<th scope="col" id="lv3">사용여부</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="status" celltype="input" style="" readOnly="true" name="상태"></td>
								<td id="codeId" celltype="input" style="" readOnly="true" required="true" name="코드아이디"></td>
								<td id="codeIdNm" celltype="input" style="" readOnly="true" required="true" name="코드명"></td>
								<td id="useAt" celltype="select" style="" readOnly="false"  displayFormat="[value] [label]"  required="true" name="사용여부"></td>
							</tr>
						</tbody>
					</table>				
			</div>
		</div>	
	</div>
</div>
</body>
</html>