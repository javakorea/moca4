<!DOCTYPE html>
<html lang="ko">
<head meta_width="1400px" meta_height="700px">
<script>
moca.EFC_BOARD_POP.editor;
moca.EFC_BOARD_POP._boardIdx;
moca.EFC_BOARD_POP._boardPIdx;
moca.EFC_BOARD_POP._boardType;
moca.EFC_BOARD_POP._boardTitle;
moca.EFC_BOARD_POP._replyStatus;
moca.EFC_BOARD_POP.___ready = function(args){
	moca.EFC_BOARD_POP.code({
        "cmb_board":{code:'boardStatus'}
    },function(result){
    	if((moca.getSs("loginTemp0") == null || moca.getSs("loginTemp0") == '') && moca.getSs("USER_ID") == null){
			moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
		}
    	moca.hide(moca.EFC_BOARD_POP.getObj('grd_file_btn_delrow'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('grd_reply_file_btn_delrow'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('btn_add'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('btn_reply_add'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('btn_receipt'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('btn_update'));
    	moca.hide(moca.EFC_BOARD_POP.getObj('btn_reply_update'));
    	
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_file_btn_fold')).siblings());
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_reply_file_btn_fold')).siblings());
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_reply_list_btn_fold')).siblings());
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_reply_list')).find('.moca_grid_list'));
    	moca.hide($(moca.EFC_BOARD_POP.getObj('form_board')).find('.rta'));
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_file')).find('.moca_grid_list'));
    	moca.hide($(moca.EFC_BOARD_POP.getObj('grd_reply_file')).find('.moca_grid_list'));
    	
    	if(args != null){
    		moca.EFC_BOARD_POP.args = args;
    		moca.EFC_BOARD_POP._boardIdx = moca.EFC_BOARD_POP.args.parent.data.BOARD_IDX;
    		moca.EFC_BOARD_POP._boardPIdx = moca.EFC_BOARD_POP.args.parent.data.BOARD_PIDX;
    		moca.EFC_BOARD_POP._boardType = moca.EFC_BOARD_POP.args.parent.data.BOARD_TYPE;
    		moca.EFC_BOARD_POP._boardTitle = moca.EFC_BOARD_POP.args.parent.data.BOARD_TITLE;
    		moca.EFC_BOARD_POP._pageType = moca.EFC_BOARD_POP.args.parent.data.PAGE_TYPE;
    	}
    	if(Object.keys(CKEDITOR.instances).length != 0){
    		CKEDITOR.instances.editor.destroy();
        	CKEDITOR.instances.reply_editor.destroy();
    	}
    	
    	CKEDITOR.replace( 'editor',{uiColor:'#fff9da',on:{
            'instanceReady':function(ev){
                moca.EFC_BOARD_POP.editor = ev.editor;
                moca.EFC_BOARD_POP._boardIdx = moca.EFC_BOARD_POP.args.parent.data.BOARD_IDX;
                if(moca.EFC_BOARD_POP._boardIdx != null){
                    moca.EFC_BOARD_POP.editor.setReadOnly(true);
                }
                $('#contents').show();
                moca.EFC_BOARD_POP.fn_searchReply();
                moca.EFC_BOARD_POP.fn_search();
                moca.show($(moca.EFC_BOARD_POP.getObj('form_board')).find('.rta'));
                
        }}} );
    	CKEDITOR.replace( 'reply_editor',{uiColor:'#deecea',on:{
            'instanceReady':function(ev){
			
        }}} );
    
    });
};

moca.EFC_BOARD_POP.fn_searchReply = function(_grd,_idx,tdObj,_thisObj){
	if(moca.EFC_BOARD_POP._boardPIdx != null){
		moca.EFC_BOARD_POP.exe({
	        url : moca._domain+moca._contextRoot+"/EFC_BOARD/selectBoardReply.do",
	        loadingbar:true,
	        data : {
	            "header" : moca.header,
	            "body" : {
	            	"BOARD_PIDX":moca.EFC_BOARD_POP._boardPIdx,
	            }
	        },          
	        callback : function(response){
	        	moca.EFC_BOARD_POP.grdList = moca.getResList(response,"selectBoardReply");
	            moca.EFC_BOARD_POP.drawGrid('grd_reply_list',moca.EFC_BOARD_POP.grdList);
	        }
	    });
		
	}
	
}
moca.EFC_BOARD_POP.grd_1__onDblClick = function(_grd,rowIndex,colIndex,colId){
    ['게시글상세']
  //showhide처리
    moca.hide($(moca.EFC_BOARD_POP.getObj("cke_editor")).find("[id$='_top']"));
    moca.hide($(moca.EFC_BOARD_POP.getObj("cke_reply_editor")).find("[id$='_top']"));
    moca.show(moca.EFC_BOARD_POP.getObj("reply_area"));
    
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
    moca.show(moca.EFC_BOARD_POP.getObj("btn_reply_del_admin"));

    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_save"));
    moca.hide(moca.EFC_BOARD_POP.getObj('grd_reply_file_btn_fold'));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_receipt"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_success"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reject"));

    moca.hide(moca.EFC_BOARD_POP.getObj("thEmail"))
    moca.hide(moca.EFC_BOARD_POP.getObj("tdEmail"));
    moca.hide(moca.EFC_BOARD_POP.getObj("thPhone"));
    moca.hide(moca.EFC_BOARD_POP.getObj("tdPhone"));
	
    //$(moca.EFC_BOARD_POP.getObj('colPhone')).attr('style','display:none');
    //$(moca.EFC_BOARD_POP.getObj('colEmail')).attr('style','display:none');	
    moca.EFC_BOARD_POP._boardIdx = moca.getCellData(_grd,rowIndex,'BOARD_IDX');
    moca.EFC_BOARD_POP.exe({
		url : moca._domain+moca._contextRoot+"/EFC_BOARD/selectBoardInfo.do",
		loadingbar:true,
		data : {
			"header" : moca.header,
			"body" : {
				"BOARD_IDX":moca.EFC_BOARD_POP._boardIdx
				}
		},
		callback : function(response){
				if(response.selectBoardInfo != null ){
				var data = response.selectBoardInfo;
				CKEDITOR.instances.reply_editor.setData(data.BOARD_CONT);

				moca.setValue(moca.EFC_BOARD_POP.getObj("wreplytitle"),data.BOARD_TITLE);
				moca.setValue(moca.EFC_BOARD_POP.getObj("wreplydate"),data.BOARD_DATE);
				moca.setValue(moca.EFC_BOARD_POP.getObj("wreplyid"),data.BOARD_WRITER);
			    moca.setValue(moca.EFC_BOARD_POP.getObj("wreplyidx"),data.BOARD_IDX);
			    moca.hide(moca.EFC_BOARD_POP.getObj("btn_save"));
			    moca.hide(moca.EFC_BOARD_POP.getObj("btn_add"));
			    if(moca.getValue(moca.EFC_BOARD_POP.getObj("wid")) != moca.getSs("USER_ID") && moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
			    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
			    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
			    }
			    if((moca.getValue(moca.EFC_BOARD_POP.getObj("wreplyid")) == moca.getSs("USER_ID"))){
			    	moca.show(moca.EFC_BOARD_POP.getObj("btn_reply_update"));
			    }else{
			    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_update"));
			    }
			    moca.EFC_BOARD_POP.drawGrid('grd_reply_file',moca.getResList(response,"selectBoardFileList"));
			}else{
				moca.error(response.error);
			}
		}
	});
};


moca.EFC_BOARD_POP.fn_search = function(_grd,_idx,tdObj,_thisObj){
	if(moca.EFC_BOARD_POP._boardIdx != null){
		moca.hide($(moca.EFC_BOARD_POP.getObj("cke_editor")).find('.cke_top'));
			moca.EFC_BOARD_POP.exe({
				url : moca._domain+moca._contextRoot+"/EFC_BOARD/selectBoardInfo.do",
				loadingbar:true,
				data : {
					"header" : moca.header,
					"body" : {
						"BOARD_IDX":moca.EFC_BOARD_POP._boardIdx
						}
				},			
				callback : function(response){
						if(response.selectBoardInfo != null ){
						var data = response.selectBoardInfo;
						CKEDITOR.instances.editor.setData(moca.resizeContsImg(data.BOARD_CONT));
						moca.show($(moca.EFC_BOARD_POP.getObj('form_board')).find('.rta'));
						moca.hide($(moca.EFC_BOARD_POP.getObj("cke_editor")).find("[id$='_top']"));
						moca.setValue(moca.EFC_BOARD_POP.getObj("cmb_board"),data.BOARD_SUPPORT);
						moca.setValue(moca.EFC_BOARD_POP.getObj("wtitle"),data.BOARD_TITLE);
						moca.setValue(moca.EFC_BOARD_POP.getObj("wdate"),data.BOARD_DATE);
						moca.setValue(moca.EFC_BOARD_POP.getObj("wid"),data.BOARD_WRITER);
					    moca.setValue(moca.EFC_BOARD_POP.getObj("widx"),data.BOARD_IDX);
					    moca.setValue(moca.EFC_BOARD_POP.getObj("wemail"),data.BOARD_EMAIL);
					    moca.setValue(moca.EFC_BOARD_POP.getObj("wphone"),data.BOARD_PHONE);
					    moca.setValue(moca.EFC_BOARD_POP.getObj("wreceiptid"),data.BOARD_RECEIPTIONER);
					    moca.setValue(moca.EFC_BOARD_POP.getObj("wcompleteid"),data.BOARD_COMPLETER);
					    moca.hide(moca.EFC_BOARD_POP.getObj("btn_save"));
					    moca.hide(moca.EFC_BOARD_POP.getObj("btn_add"));
					    moca.show(moca.EFC_BOARD_POP.getObj('grd_file_btn_fold'));
					    
					    if(moca.getSs("loginTemp0") != null && moca.getValue(moca.EFC_BOARD_POP.getObj("wid")) != moca.getSs("loginTemp0").name || moca.getValue(moca.EFC_BOARD_POP.getObj("wid")) != moca.getSs("USER_ID") && moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
					    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
					    }
					    if(moca.getValue(moca.EFC_BOARD_POP.getObj("wid")) == moca.getSs("USER_ID")){
					    	moca.show(moca.EFC_BOARD_POP.getObj('btn_update'));
					    }
				    	if(moca.getSearchCombo('cmb_board').value == "N" && moca.getSs("authorCode") == "ROLE_SUPER_ADMIN"){
					    	moca.show(moca.EFC_BOARD_POP.getObj("btn_receipt"));
					    }
					    if(moca.EFC_BOARD_POP._pageType == 'home'){
				        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
				        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
				        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_save"));
				        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
				        	//moca.hide($(moca.EFC_BOARD_POP.getObj("form_board")).find(".moca_addtion_area"));
				        }
					    moca.EFC_BOARD_POP.drawGrid('grd_file',moca.getResList(response,"selectBoardFileList"));
					}else{
						moca.error(response.error);
					}
				}
			});
	}else{
		moca.setValue(moca.EFC_BOARD_POP.getObj("cmb_board"),"N");
		var _writter = moca.getSs("USER_ID");
		if(moca.getSs("loginTemp0") != null && moca.getSs("loginTemp0") != ''){
			_writter = moca.getSs("loginTemp0").name;
		}
		moca.setValue(moca.EFC_BOARD_POP.getObj("wid"),_writter);
		moca.setValue(moca.EFC_BOARD_POP.getObj("wdate"),dateLib.getToday());
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("cmb_board"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wtitle"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wphone"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wemail"),false);
	}
	
	if(moca.getSs("authorCode") != "ROLE_SUPER_ADMIN"){
    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
    	moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del_admin"));
    }
};

moca.EFC_BOARD_POP.fn_update = function(_thisObj){
	moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
	moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del_admin"));
	if(_thisObj.id != 'btn_reply_update'){ //수정버튼
		$(moca.EFC_BOARD_POP.getObj("cke_editor")).find("[id$='_top']").show();
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wtitle"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("cmb_board"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wphone"),false);
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wemail"),false);
		moca.setValue(moca.EFC_BOARD_POP.getObj("wid"),moca.getSs("USER_ID"));
		moca.EFC_BOARD_POP.editor.setReadOnly(false);
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
		moca.show(moca.EFC_BOARD_POP.getObj("btn_save"));
		moca.show(moca.EFC_BOARD_POP.getObj("btn_add"));
		moca.show(moca.EFC_BOARD_POP.getObj('grd_file_btn_fold'));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
	}else{ //답변수정
		moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wreplytitle"),false);
		$(moca.EFC_BOARD_POP.getObj("cke_reply_editor")).find("[id$='_top']").show();
		moca.setValue(moca.EFC_BOARD_POP.getObj("wreplyid"),moca.getSs("USER_ID"));
		moca.EFC_BOARD_POP.editor.setReadOnly(false);
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_update"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del"));
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del_admin"));
		
		moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
		moca.show(moca.EFC_BOARD_POP.getObj("btn_reply_save"));
		moca.show(moca.EFC_BOARD_POP.getObj('grd_reply_file_btn_fold'));
		//답변 작성자가 관리자본인이면서 담당자 배정이 되어있지 않을때
		if(	moca.getSs("authorCode") == "ROLE_SUPER_ADMIN" && (moca.getValue(moca.EFC_BOARD_POP.getObj("wreceiptid")) == "" || moca.getValue(moca.EFC_BOARD_POP.getObj("wreceiptid")) == moca.getSs("USER_ID"))    
		){
			if(moca.getSearchCombo('cmb_board').value == "N" && moca.getSs("authorCode") == "ROLE_SUPER_ADMIN"){
		    	moca.show(moca.EFC_BOARD_POP.getObj("btn_receipt"));
		    }
	    	moca.show(moca.EFC_BOARD_POP.getObj("btn_success"));
	    	moca.show(moca.EFC_BOARD_POP.getObj("btn_reject"));
		}
	}
}
moca.EFC_BOARD_POP.fn_replyCnt = function(_thisObj,_message){
	 moca.EFC_BOARD_POP.exe({
         url : moca._domain+moca._contextRoot+"/EFC_BOARD/updateReplyCnt.do",
         loadingbar:true,
         data : {
             "header" : moca.header,
             "body" : {
             	"BOARD_IDX":moca.EFC_BOARD_POP._boardPIdx,
             	"BOARD_REPLYSTATUS":moca.EFC_BOARD_POP._replyStatus
                 }
         },          
         callback : function(response){
             if(response.cnt > 0){
            	 moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:_message});
             }
         }
     });
	
}
moca.EFC_BOARD_POP.fn_save = function(_thisObj){
	if(_thisObj.id == 'btn_save'){
		moca.confirm('저장하시겠습니까?',function(result){
	        if(result == 'Y'){
	            for(var i=0; i<grd_file.list.length;i++){
	            	if(grd_file.list[i]._system.status != "D"){
	            		grd_file.list[i]._system.status = "C";
	            	}
	            };
	            
	            if(moca.EFC_BOARD_POP._boardIdx == null){
	            	
	            	var wtitle = moca.getValue(moca.EFC_BOARD_POP.getObj("wtitle"));
	            	if(wtitle == ''){
	            		wtitle = $('#'+CKEDITOR.instances.editor.id+'_contents iframe').contents().find('body').text().substring(0,20);
	            	}
	            	
	                //게시물등록
	                moca.EFC_BOARD_POP.exe({
	                    url : moca._domain+moca._contextRoot+"/EFC_BOARD/insertBoard.do",
	                    loadingbar:true,
	                    data : {
	                        "header" : moca.header,
	                        "body" : {
	                        	"BOARD_DELYN":'N',
	                        	"BOARD_SUPPORT":moca.EFC_BOARD_POP.getSearchCombo('cmb_board').value,
	                        	"BOARD_TYPE":moca.EFC_BOARD_POP._boardType,
	                            "BOARD_TITLE":wtitle,
	                            "BOARD_CONT":CKEDITOR.instances.editor.getData(),
	                            "GET_CONT_TXT":CKEDITOR.instances.editor.document.getBody().getText(),
	                            "BOARD_WRITER":moca.getValue(moca.EFC_BOARD_POP.getObj("wid")),
	                            "BOARD_PHONE":moca.getValue(moca.EFC_BOARD_POP.getObj("wphone")),
	                            "BOARD_EMAIL":moca.getValue(moca.EFC_BOARD_POP.getObj("wemail")),
	                            "fileList":moca.EFC_BOARD_POP.getFilteredList("grd_file","status","C")
	                            }
	                    },          
	                    callback : function(response){
	                        if(response.cnt > 0){
	                            moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:"성공적으로 저장하였습니다."});
	                        }
	                    }
	                });
	            }else{
            		//게시글수정
            		 moca.EFC_BOARD_POP.exe({
                         url : moca._domain+moca._contextRoot+"/EFC_BOARD/updateBoard.do",
                         loadingbar:true,
                         data : {
                             "header" : moca.header,
                             "body" : {
                            	 "BOARD_TYPE":moca.EFC_BOARD_POP._boardType,
                            	 "BOARD_SUPPORT":moca.EFC_BOARD_POP.getSearchCombo('cmb_board').value,
                                 "BOARD_IDX":moca.getValue(moca.EFC_BOARD_POP.getObj('widx')),
                                 "BOARD_PIDX":moca.EFC_BOARD_POP._boardPIdx,
                                 "BOARD_TITLE":moca.getValue(moca.EFC_BOARD_POP.getObj("wtitle")),
                                 "BOARD_CONT":CKEDITOR.instances.editor.getData(),
                                 "BOARD_WRITER":moca.getSs("USER_ID"),
                                 "BOARD_PHONE":moca.getValue(moca.EFC_BOARD_POP.getObj("wphone")),
 	                             "BOARD_EMAIL":moca.getValue(moca.EFC_BOARD_POP.getObj("wemail")),
                                 "fileList":moca.EFC_BOARD_POP.getFilteredList("grd_file","status","C")
                                 }
                         },          
                         callback : function(response){
                        	 if(response.cnt > 0){
 	                            moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:"성공적으로 저장하였습니다."});
 	                        }
                         }
                     });
	            }
	        }
	    });
	}else{
		//답변저장
		moca.confirm('답변을 저장하시겠습니까?',function(result){
	        if(result == 'Y'){
	        	
	            var _ReplyIdx = moca.getValue(moca.EFC_BOARD_POP.getObj("wreplyidx"));
	            for(var i=0; i<grd_reply_file.list.length;i++){
	            	if(grd_reply_file.list[i]._system.status != "D"){
	            		grd_reply_file.list[i]._system.status = "C";
	            	}
	            };
	            
	            var wtitle = moca.getValue(moca.EFC_BOARD_POP.getObj("wreplytitle"));
            	if(wtitle == ''){
            		wtitle = $('#'+CKEDITOR.instances.reply_editor.id+'_contents iframe').contents().find('body').text().substring(0,20);
            	}
            	
	            if(_ReplyIdx == null || _ReplyIdx == ""){
	    			//답변등록
	        		moca.EFC_BOARD_POP.exe({
	                    url : moca._domain+moca._contextRoot+"/EFC_BOARD/insertBoard.do",
	                    loadingbar:true,
	                    data : {
	                        "header" : moca.header,
	                        "body" : {
	                        	"BOARD_DELYN":'N',
	                        	"BOARD_SUPPORT":moca.EFC_BOARD_POP.getSearchCombo('cmb_board').value,
	                        	"BOARD_TYPE":moca.EFC_BOARD_POP._boardType,
	                        	"BOARD_PIDX":moca.EFC_BOARD_POP._boardIdx,
	                            "BOARD_TITLE":wtitle,
	                            "BOARD_CONT":CKEDITOR.instances.reply_editor.getData(),
	                            "GET_CONT_TXT":CKEDITOR.instances.reply_editor.document.getBody().getText(),
	                            "BOARD_WRITER":moca.getValue(moca.EFC_BOARD_POP.getObj("wreplyid")),
	                            "fileList":moca.EFC_BOARD_POP.getFilteredList("grd_reply_file","status","C")
	                            }
	                    },          
	                    callback : function(response){
	                    	if(response.cnt > 0){
	                    		moca.EFC_BOARD_POP._replyStatus = 'add';
	                    		moca.EFC_BOARD_POP.fn_replyCnt(null,"성공적으로 저장하였습니다.");
	                         }
	                    }
	                });
	        	}else{
	        		//답변수정
	        		 moca.EFC_BOARD_POP.exe({
	                     url : moca._domain+moca._contextRoot+"/EFC_BOARD/updateBoard.do",
	                     loadingbar:true,
	                     data : {
	                         "header" : moca.header,
	                         "body" : {
	                        	 "BOARD_SUPPORT":moca.EFC_BOARD_POP.getSearchCombo('cmb_board').value,
	                        	 "BOARD_TYPE":moca.EFC_BOARD_POP._boardType,
	                        	 "BOARD_PIDX":moca.EFC_BOARD_POP._boardPIdx,
	                         	 "BOARD_IDX":moca.EFC_BOARD_POP._boardIdx,
	                             "BOARD_TITLE":moca.getValue(moca.EFC_BOARD_POP.getObj("wreplytitle")),
	                             "BOARD_CONT":CKEDITOR.instances.reply_editor.getData(),
	                             "BOARD_WRITER":moca.getSs("USER_ID"),
	                             "fileList":moca.EFC_BOARD_POP.getFilteredList("grd_reply_file","status","C")
	                             }
	                     },          
	                     callback : function(response){
	                         if(response.cnt > 0){
	                             moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:"성공적으로 저장하였습니다."});
	                         }
	                     }
	                 });
	        	}
	        }
	    });
		
	}
    
};
moca.EFC_BOARD_POP.fn_adminDel = function(_thisObj){
	['게시글물리삭제 관리자삭제']
	if(_thisObj.id == 'btn_del_admin'){
		_msg = '삭제하시면 데이터를 더이상 복구하실 수 없습니다.<br/>또한 원글을 삭제하실경우 답글까지도 삭제됩니다.<br/>그래도 삭제하시겠습니까?';
	}else{
		_msg = '삭제하시면 데이터를 더이상 복구하실 수 없습니다.<br/>그래도 삭제하시겠습니까?';
	}
	var _idx;
	var _pid;
	if(moca.EFC_BOARD_POP._boardIdx == moca.EFC_BOARD_POP._boardPIdx){ //원글
		_idx = moca.EFC_BOARD_POP._boardPIdx;
		_pid = moca.EFC_BOARD_POP._boardPIdx;
	}else{
		_idx = moca.EFC_BOARD_POP._boardIdx;
	}
	moca.confirm(_msg,function(result){
        if(result == 'Y'){
            //삭제
            moca.EFC_BOARD_POP.exe({
                url : moca._domain+moca._contextRoot+"/EFC_BOARD/deleteBoard.do",
                loadingbar:true,
                data : {
                    "header" : moca.header,
                    "body" : {
                    	"BOARD_IDX":_idx,
                        "BOARD_PIDX":_pid
                        }
                },          
                callback : function(response){
                    if(response.cnt > 0){
                        if(moca.EFC_BOARD_POP._boardIdx != moca.EFC_BOARD_POP._boardPIdx){ //답글삭제
                        	moca.EFC_BOARD_POP._replyStatus = 'del';
                            moca.EFC_BOARD_POP.fn_replyCnt();
                        }else{//원글삭제
                        	moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:"삭제가 완료되었습니다."});
                        }
                    }
                }
            });
        }
    });
};
moca.EFC_BOARD_POP.fn_del = function(_thisObj){
	['게시글논리삭제 delYN :Y']
	var _idx;
	var _pid;
	
	if(_thisObj.id == 'btn_del'){
		_msg = '원글을 삭제하실경우 답글까지도 삭제됩니다.<br/>삭제하시겠습니까?';
	}else{
		_msg = '삭제하시겠습니까?';
	}
	if(moca.EFC_BOARD_POP._boardIdx == moca.EFC_BOARD_POP._boardPIdx){ //원글
		_idx = moca.EFC_BOARD_POP._boardPIdx;
		_pid = moca.EFC_BOARD_POP._boardPIdx;
	}else{
		_idx = moca.EFC_BOARD_POP._boardIdx;
	}
	 moca.confirm(_msg,function(result){
        if(result == 'Y'){
        	//게시글삭제
         	moca.EFC_BOARD_POP.exe({
                 url : moca._domain+moca._contextRoot+"/EFC_BOARD/deleteStatusBoard.do",
                 loadingbar:true,
                 data : {
                     "header" : moca.header,
                     "body" : {
                         "BOARD_IDX":_idx,
                         "BOARD_PIDX":_pid
                         }
                 },          
                 callback : function(response){
                     if(response.cnt > 0){
                    	 
                     	if(moca.EFC_BOARD_POP._boardIdx != moca.EFC_BOARD_POP._boardPIdx){ //답글삭제
                        	moca.EFC_BOARD_POP._replyStatus = 'del';
                            moca.EFC_BOARD_POP.fn_replyCnt();
                        }else{//원글삭제
                        	moca.popClose(moca.EFC_BOARD_POP.pageId,{callback:"true",message:"삭제가 완료되었습니다."});
                            
                        }
                     }
                 }
             });
        }
	 });
};
moca.EFC_BOARD_POP.fn_searchfile = function(_grd,_idx,tdObj,_thisObj){
    if(moca.EFC_BOARD_POP._boardIdx != null){
        moca.EFC_BOARD_POP.exe({
            url : moca._domain+moca._contextRoot+"/EFC_BOARD/selectBoardFileList.do",
            loadingbar:false,
            data : {
                "header" : moca.header,
                "body" : {
                    "BOARD_IDX":moca.EFC_BOARD_POP._boardIdx
                    }
            },          
            callback : function(response){
            	moca.EFC_BOARD_POP.drawGrid('grd_file',moca.getResList(response,"selectBoardFileList"));
            }
        });
    }
};
moca.EFC_BOARD_POP._openFileUpload = function(_thisObj) {
    moca.popup({
        type:"POPUP",
        modal:"false",
        url:'/moca/comp/COMP_UPLD.html',
        title:"파일업로드",
        callback:function(result){
            //업로드완료후 리턴업로드된파일정보를 받아서
            //이후 파일관련테이블에 insert하는 로직을 추가한다.
            var fileSize = result.fileSize;
            var fileLength = result.fileLength;
            var originalFilename = result.originalFilename;
            var physicalFilename = result.physicalFilename;
            var physicalFilepath = result.physicalFilepath;
            var subDir = result.subDir;
            var uploadDir = result.uploadDir;
            if(_thisObj.id == "btn_add"){
            	 var arr = grd_file.list;
            }else{
            	 var arr = grd_reply_file.list;
            }
            var row = {BOARDFILE_NAME:originalFilename,BOARDFILE_SIZE:fileSize,BOARDFILE_NAMESERVER:physicalFilename,BOARDFILE_PATH:physicalFilepath}; 
            row._system = {"status":""};
            var sn = arr.length;
            arr[sn] =  row;
            if(_thisObj.id == "btn_add"){
            	moca.EFC_BOARD_POP.drawGrid('grd_file',arr);
            }else{
            	moca.EFC_BOARD_POP.drawGrid('grd_reply_file',arr);
            }
            
            //grd_file.list[sn]._system.status = "C";
        },
        data:{
            subDir:"EFC_BOARD_POP",
            onFileSelected:"moca.EFC_BOARD_POP.onFileSelected"
        }
    });
};

moca.EFC_BOARD_POP.grd_fileDownload = function(_grd,rowIndex,colIndex,colId){
	if(_grd.id != 'grd_reply_file'){
		var _list = moca.EFC_BOARD_POP.getObj('grd_file').list;
	}else{
		var _list = moca.EFC_BOARD_POP.getObj('grd_reply_file').list;
	}
    moca.fileDownloadAjax({
        url:moca._contextRoot+"/moca/fileDownload.do",
        param:{originalFilename:_list[rowIndex]["BOARDFILE_NAME"],physicalFilename:_list[rowIndex]["BOARDFILE_NAMESERVER"],subDir:moca.EFC_BOARD_POP.srcId}
    });
};
moca.EFC_BOARD_POP.onFileSelected = function(filename,filesize,_e,_this) {
    //filename이나 filesize를 활용하여 업로드여부를 체크할수있다.
    
    return true;//or false
};
moca.EFC_BOARD_POP.popId = "EFC_BOARD_ANS_POP";
moca.EFC_BOARD_POP.fn_reply = function(_thisObj){
    ['답변달기']
    $(moca.EFC_BOARD_POP.getObj("cke_editor")).find('#cke_1_top').hide();
    moca.setReadOnly(moca.EFC_BOARD_POP.getObj("wreplytitle"),false);
    $(moca.EFC_BOARD_POP.getObj("reply_area")).show();
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_update"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_update"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_del"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_del_admin"));
    moca.hide(moca.EFC_BOARD_POP.getObj("btn_reply_del_admin"));
    moca.hide(moca.EFC_BOARD_POP.getObj("thEmail"));
    moca.hide(moca.EFC_BOARD_POP.getObj("tdEmail"));
    moca.hide(moca.EFC_BOARD_POP.getObj("tdPhone"));
    moca.hide(moca.EFC_BOARD_POP.getObj("thPhone"));
    //$(moca.EFC_BOARD_POP.getObj('colPhone')).attr('style','display:none');
    //$(moca.EFC_BOARD_POP.getObj('colEmail')).attr('style','display:none');
    moca.setValue(moca.EFC_BOARD_POP.getObj("wreplyid"),moca.getSs("USER_ID"));
    if(
    		//접수자 null 아니면서 접수자가 세션아이디랑 다를때 
    		//접수자가 null이 아니면서 관리자가 아닐때
    	(moca.getSs("authorCode") != "ROLE_SUPER_ADMIN")	
    ){
    		moca.hide(moca.EFC_BOARD_POP.getObj("btn_receipt"));
        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_success"));
        	moca.hide(moca.EFC_BOARD_POP.getObj("btn_reject"));
	}
};

moca.EFC_BOARD_POP._boardSupport ;
moca.EFC_BOARD_POP.fn_status = function(_thisObj){
	var _completeid;
	var _receiptid = moca.getValue(moca.EFC_BOARD_POP.getObj('wreceiptid')) != ""?moca.getValue(moca.EFC_BOARD_POP.getObj('wreceiptid')):moca.getSs("USER_ID")
	if(_thisObj.innerText == "접수"){
		moca.EFC_BOARD_POP._boardSupport = "R";
	}else if(_thisObj.innerText == "완료"){
		moca.EFC_BOARD_POP._boardSupport = "Y";
		_completeid = moca.getSs("USER_ID");
	}else if(_thisObj.innerText == "반려"){
		moca.EFC_BOARD_POP._boardSupport = "B";
	}
	moca.confirm(_thisObj.innerText+'하시겠습니까?',function(result){
        if(result == 'Y'){
        	moca.EFC_BOARD_POP.exe({
        		url : moca._domain+moca._contextRoot+"/EFC_BOARD/receiptBoard.do",
        		loadingbar:true,
        		data : {
        			"header" : moca.header,
        			"body" : {
        				"BOARD_SUPPORT":moca.EFC_BOARD_POP._boardSupport,
        				"BOARD_IDX":moca.EFC_BOARD_POP._boardPIdx,
        				"BOARD_RECEIPTIONER":_receiptid,
        				"BOARD_COMPLETER": _completeid,
        				"BOARD_WRITERPHONE": moca.getValue(moca.EFC_BOARD_POP.getObj('wphone')),
        				"BOARD_WRITER":moca.getValue(moca.EFC_BOARD_POP.getObj('wid'))
        				}
        		},			
        		callback : function(response){
        			if(response.cnt > 0){
                        moca.alert(_thisObj.innerText+'되었습니다.');
                        moca.EFC_BOARD_POP.fn_search();
                        if(moca.EFC_BOARD_POP._boardType == 'ERP'){
                        	moca.EFC_BOARD.fn_search();
                        }else{
                        	moca.EFC_BOARD_WS.fn_search();
                        }
                    }else{
                    	moca.error(response.error);
                    }
        		}
        	});
        	
        }
	});
};

moca.EFC_BOARD_POP.dispCnt= function(_thisVal){
	if(_thisVal !=null && _thisVal != 0){
		return _thisVal;
	}else{
		_thisVal = '';
		return _thisVal;
	}
}

</script>
<style>
</style>
</head>
<body>
	<div class="moca_pop_cont_wrap flex mobile" style="display:none;" id="contents">
        <div class="lybox flex fauto">
            <div class="ly_column col_5 fauto">
                <div class="ly_col_cont flex fcol">
				<div type="form" id="form_board" class="moca_table toolbar" style=""
	                label=""
	                showRowSelection="false"
	                addition='[
	                {"type":"button","position":"right","id":"btn_reply","label":"답변작성","onclick":"moca.EFC_BOARD_POP.fn_reply","innerStyle":"background:#97a2ba"},
	                {"type":"button","position":"right","id":"btn_update","label":"수정","onclick":"moca.EFC_BOARD_POP.fn_update","innerStyle":"background:#97a2ba"},
	                {"type":"button","position":"right","id":"btn_del","label":"삭제","onclick":"moca.EFC_BOARD_POP.fn_del","innerStyle":"background:#97a2ba"},
	                {"type":"button","position":"right","id":"btn_save","label":"저장","onclick":"moca.EFC_BOARD_POP.fn_save","innerStyle":"background:#97a2ba"},
	                {"type":"button","position":"right","id":"btn_del_admin","label":"물리삭제","onclick":"moca.EFC_BOARD_POP.fn_adminDel","innerStyle":"background:#6d7993", "addClass":""}
	                    ]'
	                >
				          	<div class="moca_table_cont" type="table">
				          		<div type="tbody">
				          			<div type="tr">
				          				<div type="th">ID</div>
		                                <div type="td">
		                                    <div type="input" id="widx" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">제목</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%;" innerStyle="" id="wtitle" displayFormat=""  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">상태</div>
		                                <div type="td">
		                                	<!-- <div type="combo" id="cmb_board" class="moca_combo" readonly="true" displayFormat="[label]" cdField="code" nmField="codeNm" ></div> -->
		                                	<div type="searchCombo" 
											id="cmb_board" 
											class="moca_searchCombo" 
											inneronchange="" 
											style="width:100%;" 
											readOnly="true"
											displayFormat="[label]" 
											cdField="code" 
											nmField="codeNm"   
											itemset='[{"cd":"0","nm":"해당없음 "},{"cd":"1","nm":"(%)비율"}]'>
											</div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">작성일시</div>
		                                <div type="td">
		                                    <div type="input" id="wdate" class="mocaInput" style="width:100%;" innerStyle="" displayFunction="moca.dateFormat"  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">작성자</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%;" innerStyle="" id="wid" displayFormat=""  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">휴대폰번호</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%; " innerStyle="" id="wphone" displayFormat=""  readonly="true"
		                                        defaultValue="" 
		                                        keyMask="onlyNumber" displayFunction="moca.phoneWithDashFormatter"
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">이메일</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%" innerStyle="" id="wemail" displayFormat=""  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">접수자</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%;" innerStyle="" id="wreceiptid" displayFunction=""  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          			<div type="tr">
		                                <div type="th">완료자</div>
		                                <div type="td">
		                                    <div type="input" class="mocaInput" style="width:100%;" innerStyle="" id="wcompleteid" displayFunction=""  readonly="true"
		                                        defaultValue="" 
		                                        selecterItem=""
		                                        showRadioOption="false"
		                                    ></div>
		                                </div>
		                            </div>
				          		</div>
				          	</div>
                	</div>
			        <div class="mt5 edit fit"  style="top:0">
			            <div contenteditable="true" placeholder="" id="editor"></div>
			        </div>
			        <div type="grid" class="moca_grid toolbar sc_row1 mt10 fold" default_cell_height="26px" id="grd_file" style="top:0; height:112px" rowSelectedColor="#434e5f"
			        
			                            toolbar_search_size="false"
			                            toolbar_detail="false"
			                            toolbar_exup="false"
			                            toolbar_exdn="false"
			                            toolbar_addrow="false"
			                            toolbar_delrow="true"
			                            toolbar_nextbtn="false"
			                            toolbar_full="false"
			                            toolbar_fold="true"
			                            toolbar_grid_button2='{"position":"left","id":"btn_add","label":"파일찾기","onclick":"moca.EFC_BOARD_POP._openFileUpload","addClass":"","innerDisabled":"false"}'
			                            onDblClick = "moca.EFC_BOARD_POP.grd_fileDownload"
			                            subLabel="첨부파일"
			        
			        >
			                <table style="width: 100%">
			                    <colgroup>
			                            <col style="width:60px">
			                            <col style="width:80px">
			                            <col style="">
			                            <col style="width:150px">       
			                    </colgroup>
			                    <thead>
			                        <tr>
			                            <th scope="col" id="H_status">상태</th>
			                            <th scope="col" id="H_BOARDFILE_IDX">파일ID</th>
			                            <th scope="col" id="H_BOARDFILE_NAME">파일명</th>
			                            <th scope="col" id="H_BOARDFILE_SIZE">파일크기</th>
			                        </tr>
			                    </thead>
			                    <tbody>
			                        <tr>
			                            <td id="status" celltype="input" style="" readOnly="true" name="상태"></td>
			                            <td id="BOARDFILE_IDX" celltype="input" style="" readOnly="true" name="파일ID"></td>
			                            <td id="BOARDFILE_NAME" celltype="input" style="text-align:left" name="파일명" readOnly="true"></td>
			                            <td id="BOARDFILE_SIZE" celltype="input" style="" name="파일크기" readOnly="true"></td>
			                        </tr>
			                    </tbody>
			                </table>                
			        </div>
			        <div class="contour" style="top:5px"></div>
					<div type="grid" class="moca_grid toolbar sc_row1 mt10 fold" default_cell_height="26px" style="height:112px" id="grd_reply_list" rowSelectedColor="#434e5f"
								toolbar_search_size="false"
								toolbar_detail="true"
								toolbar_exup="false"
								toolbar_exdn="true"
								toolbar_addrow="false"
								toolbar_delrow="false"
								toolbar_nextbtn="false"
								toolbar_full="true"
								toolbar_fold="true"
                                onRowSelected="moca.EFC_BOARD_POP.grd_1__onDblClick"
								subLabel="게시물답변"
								pagingType = "scrollbar"
					>
							<table style="width: 100%">
								<colgroup>
										<col style="width:30px">
										<col style="width:60px">
										
										<col style="min-width:250px">
										<col style="width:40px">
										<col style="width:100px">
										<col style="width:150px">
										<!--<col style="width:100px">-->	
								</colgroup>
								<thead>
									<tr>
										<th scope="col" celltype="checkbox" id="H_chk" targetId="chk">선택</th>
										<th scope="col" id="H_BOARD_IDX">ID</th>
										<th scope="col" id="H_BOARD_TITLE">제목</th>
										<th scope="col" id="H_BOARD_FILECNT">첨부</th>
										<th scope="col" id="H_BOARD_WRITER"  filterable="true" filterableId="BOARD_WRITER">작성자</th>
										<th scope="col" id="H_BOARD_DATE">작성일시</th>
										<!--<th scope="col" id="H_BOARD_BTN">버튼</th>-->
									</tr>
								</thead>
								<tbody>
									<tr>
										<td id="chk" celltype="checkbox" style="" trueValue="1" falseValue="0" name="선택" ></td>
										<td id="BOARD_IDX" celltype="input" style="text-align:center" name="ID" readOnly="true"></td>
										<td id="BOARD_TITLE" celltype="input" style="text-align:left" name="제목" readOnly="true"></td>
										<td id="CNT" celltype="input" style="" name="첨부" readOnly="true" displayFunction="moca.EFC_BOARD_POP.dispCnt"></td>
										<td id="BOARD_WRITER" celltype="input" style="text-align:center" name="작성자" readOnly="true"></td>
										<td id="BOARD_DATE" celltype="input" style="" name="작성일" readOnly="true" displayFunction="moca.longToDate"></td>
										<!--<td id="delBtn" name="삭제"  celltype="button" readonly="false" required="false" addRowEditable="false" callFunction="moca.TO_000P01.fn_onBtnClick" btnLabel="삭제"></td>-->
									</tr>
								</tbody>
							</table>				
					</div>
                </div>
            </div>
            <div class="ly_column col_5 fauto" id="reply_area" style="display:none;">
                <div class="ly_col_cont pl15 flex fcol">
                     <div type="form" id="form_reply" class="moca_table toolbar" style=""
                            label="답변작성"
                            showRowSelection="false"
                            addition='[
                            {"type":"button","position":"right","id":"btn_receipt","label":"접수","onclick":"moca.EFC_BOARD_POP.fn_status","innerStyle":"background:#81bcb3"},
                             {"type":"button","position":"right","id":"btn_success","label":"완료","onclick":"moca.EFC_BOARD_POP.fn_status","innerStyle":"background:#81bcb3"},
                              {"type":"button","position":"right","id":"btn_reject","label":"반려","onclick":"moca.EFC_BOARD_POP.fn_status","innerStyle":"background:#81bcb3"},
                            {"type":"button","position":"right","id":"btn_reply_update","label":"답변수정","onclick":"moca.EFC_BOARD_POP.fn_update","innerStyle":"background:#81bcb3"},
			                {"type":"button","position":"right","id":"btn_reply_del","label":"답변삭제","onclick":"moca.EFC_BOARD_POP.fn_del","innerStyle":"background:#81bcb3"},
                            {"type":"button","position":"right","id":"btn_reply_save","label":"답변저장","onclick":"moca.EFC_BOARD_POP.fn_save","innerStyle":"background:#81bcb3"},
                            {"type":"button","position":"right","id":"btn_reply_del_admin","label":"물리삭제","onclick":"moca.EFC_BOARD_POP.fn_adminDel","innerStyle":"background:#638f88", "addClass":""}
                                ]'
                            >
                            <div class="scrollX_area mt5">
                                <table class="moca_table_cont" style="">
                                    <colgroup>
                                            <col style="width:60px">
                                            <col width="140" style="min-width:140px">
                                            <col style="width:200px">
                                            <col style="width:120px">
                                    </colgroup>
                                    <thead>
                                        <tr>
                                            <th class="bg_green">답변ID</th>
                                            <th class="bg_green">제목</th>
                                            <th class="bg_green">작성일시</th>
                                            <th class="bg_green">작성자</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div type="input" id="wreplyidx" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
                                            </td>
                                            <td>
                                                <div type="input" class="mocaInput req" style="width:100%;" innerStyle="" id="wreplytitle" displayFormat=""  readonly="true"
                                                    defaultValue="" 
                                                    selecterItem=""
                                                    showRadioOption="false"
                                                ></div>
                                            </td>
                                            <td>
                                                <div type="input" class="mocaInput" style="width:100%; " innerStyle="" id="wreplydate" displayFunction="moca.dateFormat"  readonly="true"
                                                    defaultValue="" 
                                                    selecterItem=""
                                                    showRadioOption="false"
                                                ></div>
                                            </td>
                                            <td>
                                                <div type="input" class="mocaInput" style="width:100%;" innerStyle="text-align:center;" id="wreplyid" displayFormat=""  readonly="true"
                                                    defaultValue="" 
                                                    selecterItem=""
                                                    showRadioOption="false"
                                                ></div>
                                            </td>
                                        </tr>  
                                    </tbody>
                                </table>
                            </div>
                    </div>
                    <div class="mt5 edit fit"  style="top:0">
                        <div contenteditable="true" placeholder="" id="reply_editor"></div>
                    </div>
                    <div type="grid" class="moca_grid toolbar mt10 fold" default_cell_height="26px" id="grd_reply_file" style="top:0; height:112px" rowSelectedColor="#434e5f"
                    
                                        toolbar_search_size="false"
                                        toolbar_detail="false"
                                        toolbar_exup="false"
                                        toolbar_exdn="false"
                                        toolbar_addrow="false"
                                        toolbar_delrow="true"
                                        toolbar_nextbtn="false"
                                        toolbar_full="false"
                                        toolbar_fold="true"
                                        toolbar_grid_button2='{"position":"left","id":"btn_reply_add","label":"파일찾기","onclick":"moca.EFC_BOARD_POP._openFileUpload","addClass":"","innerDisabled":"false"}'
                                        onDblClick = "moca.EFC_BOARD_POP.grd_fileDownload"
                                        subLabel="답변 첨부파일"
                    
                    >
                            <table style="width: 100%">
                                <colgroup>
                                        <col style="width:60px">
                                        <col style="width:80px">
                                        <col style="">
                                        <col style="width:150px">       
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th scope="col" class="bg_green" id="H_status">상태</th>
                                        <th scope="col" class="bg_green" id="H_BOARDFILE_IDX">파일ID</th>
                                        <th scope="col" class="bg_green" id="H_BOARDFILE_NAME">파일명</th>
                                        <th scope="col" class="bg_green" id="H_BOARDFILE_SIZE">파일크기</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td id="status" celltype="input" style="" readOnly="true" name="상태"></td>
                                        <td id="BOARDFILE_IDX" celltype="input" style="" readOnly="true" name="파일ID"></td>
                                        <td id="BOARDFILE_NAME" celltype="input" style="text-align:left" name="파일명" readOnly="true"></td>
                                        <td id="BOARDFILE_SIZE" celltype="input" style="" name="파일크기" readOnly="true"></td>
                                    </tr>
                                </tbody>
                            </table>                
                    </div>
                </div>
            </div>
            <div class="reply_bg"></div>
        </div>
	</div>
</body>
</html>