<!DOCTYPE html>
<html lang="ko">
<head meta_width="800px" meta_height="272px">
<title>금융기관DB정보상세</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca.css">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca_layout.css">
<script language="JavaScript" src="../../moca/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../moca/js/moca_ui.js"></script>
<script language="JavaScript" src="../../moca/js/moca.js"></script>
<script language="JavaScript" src="../../moca/js/testCalendar.js"></script>
<script>
moca.TO_000P08.___ready = function(args){
	if(args != null){
		moca.TO_000P08.args = args;
	};
	moca.removeLs('moca.TO_000P08.initData');
	moca.TO_013.exe({
		url : moca._domain+moca._contextRoot+"/TO_013/fincialDbList.do",
		loadingbar:true,
		data : {
			"header" : moca.header,
			"body" : {
				"inqType":"2",
				"idx":moca.TO_000P08.args.parent.data.idx+''
				}
		},	
		callback : function(response){
			var data = response.fincialDbList[0];
			moca.TO_000P08.data = data;
			moca.setLs('moca.TO_000P08.initData',moca.TO_000P08.data);
			moca.TO_000P08.fn_setList(moca.TO_000P08.data);
		}
	});
};
moca.TO_000P08.setValue = function(_data){

};























moca.TO_000P08.fn_save = function(_this){
	if(moca.confirm('저장하시겠습니까?',function(result){
		if(result == 'Y'){
			moca.TO_000P08.exe({
				url : moca._domain+moca._contextRoot+"/TO_000P08/updateFincial.do",
				loadingbar:true,
				data : {
					"header" : moca.header,
					"body" : {
						idx : moca.TO_000P08.args.parent.data.idx+'',
						FinacType: moca.getValue(moca.TO_000P08.getObj("FinacType")), 		
						FinacName : moca.getValue(moca.TO_000P08.getObj("FinacName")),
						EditFinacName : moca.getValue(moca.TO_000P08.getObj("EditFinacName")),
						BusinessRstNumber : moca.getValue(moca.TO_000P08.getObj("BusinessRstNumber")),
						CopRstNumber :  moca.getValue(moca.TO_000P08.getObj("CopRstNumber")),
						OwnerName : moca.getValue(moca.TO_000P08.getObj("OwnerName")),
						FinacAddress: moca.getValue(moca.TO_000P08.getObj("FinacAddress")), 		
						FinacManager : moca.getValue(moca.TO_000P08.getObj("FinacManager")),
						ManagerPhone : moca.getValue(moca.TO_000P08.getObj("ManagerPhone")).replace(/-/g,''),
						CorpPhone : moca.getValue(moca.TO_000P08.getObj("CorpPhone")).replace(/-/g,''),
						Note :moca.getValue(moca.TO_000P08.getObj("Note"))
					}
				},			
				callback : function(response){
					if(response.error){
						moca.alert(response.error);
					}else{
						moca.alert(response.message);
						moca.removeLs(moca.TO_000P08.tempDataHeader+'basicInfo'+moca.TO_000P08.args.parent.data.idx);
						moca.TO_013.fn_search();
					}
				}
			});
		}
	}));
};

moca.TO_000P08.tempDataHeader = 'moca.TO_000P08.tempData.';
moca.TO_000P08.fn_tempShow = function(thisObj){
	var list = moca.getLs(moca.TO_000P08.tempDataHeader+'basicInfo'+moca.TO_000P08.args.parent.data.idx);
	moca.TO_000P08.fn_setList(list);
	moca.alert('임시저장된 데이터를 불러왔습니다.');
};
moca.TO_000P08.fn_tempSave = function(thisObj){
	moca.setLs(moca.TO_000P08.tempDataHeader+'basicInfo'+moca.TO_000P08.args.parent.data.idx,moca.TO_000P08.fn_getList());
	moca.alert('임시저장하였습니다.');
};
moca.TO_000P08.fn_initShow = function(thisObj){
	var map = moca.getLs('moca.TO_000P08.initData');
	moca.TO_000P08.fn_setList(map);
};
moca.TO_000P08.fn_setList = function(data){
	moca.TO_000P08.setFormValue('form_3','FinacType',data.FinacType); //구분
	moca.TO_000P08.setFormValue('form_3','FinacName',data.FinacName); //금융기관
	moca.TO_000P08.setFormValue('form_3','EditFinacName',data.EditFinacName); //금융기관명(수정)
	moca.TO_000P08.setFormValue('form_3','BusinessRstNumber',data.BusinessRstNumber); //사업자번호
	moca.TO_000P08.setFormValue('form_3','CopRstNumber',data.CopRstNumber); //법인등록번호
	moca.TO_000P08.setFormValue('form_3','OwnerName',data.OwnerName); //대표자
	moca.TO_000P08.setFormValue('form_3','RegisterTime',data.RegisterTime); //등록일
	moca.TO_000P08.setFormValue('form_3','FinacAddress',data.FinacAddress); //주소
	moca.TO_000P08.setFormValue('form_3','FinacManager',data.FinacManager); //담당자명
	moca.TO_000P08.setFormValue('form_3','ManagerPhone',data.ManagerPhone); //담당자전화번호
	moca.TO_000P08.setFormValue('form_3','CorpPhone',data.CorpPhone); //전화번호
	moca.TO_000P08.setFormValue('form_3','Note',data.Note); //비고
	moca.TO_000P08.nowList = data;
};
moca.TO_000P08.fn_getList = function(){
	var _map = moca.TO_000P08.nowList;
	_map.FinacType = moca.getValue(moca.TO_000P08.getObj("FinacType"));
	_map.FinacName = moca.getValue(moca.TO_000P08.getObj("FinacName"));
	_map.EditFinacName = moca.getValue(moca.TO_000P08.getObj("EditFinacName"));
	_map.BusinessRstNumber = moca.getValue(moca.TO_000P08.getObj("BusinessRstNumber"));
	_map.CopRstNumber = moca.getValue(moca.TO_000P08.getObj("CopRstNumber"));
	_map.OwnerName = moca.getValue(moca.TO_000P08.getObj("OwnerName"));
	_map.RegisterTime = moca.getValue(moca.TO_000P08.getObj("RegisterTime"));
	_map.FinacAddress = moca.getValue(moca.TO_000P08.getObj("FinacAddress"));
	_map.FinacManager = moca.getValue(moca.TO_000P08.getObj("FinacManager"));
	_map.ManagerPhone = moca.getValue(moca.TO_000P08.getObj("ManagerPhone"));
	_map.CorpPhone = moca.getValue(moca.TO_000P08.getObj("CorpPhone"));
	_map.Note = moca.getValue(moca.TO_000P08.getObj("Note"));
	
	moca.TO_000P08.nowList = _map;
	return moca.TO_000P08.nowList;
};

</script>
<style>
</style>
</head>
<body>
	<div class="moca_pop_cont_wrap">
		<div type="form" id="form_3" class="moca_table toolbar" style=""
				label="금융기관정보"
				showRowSelection="false"
			addition='[
				{"type":"button","position":"right","id":"btn_apply","label":"적용","onclick":"moca.TO_000P08.fn_save","addClass":""},
				{"type":"button","position":"right","id":"btn_save","label":"초기화","onclick":"moca.TO_000P08.fn_initShow","addClass":""},
				{"type":"button","position":"right","id":"btn_save","label":"임시저장","onclick":"moca.TO_000P08.fn_tempSave","addClass":"temp"},
				{"type":"button","position":"right","id":"btn_save","label":"임시저장불러오기","onclick":"moca.TO_000P08.fn_tempShow","addClass":"temp"}
				]'
				>
			<table class="moca_table_cont th_tar">
				<colgroup>
					<col style="width:120px">
					<col style="width:160px">
					<col style="width:120px">
					<col>
				</colgroup>
				<tr>
					<th>구분</th>
					<td>
						<!-- COMBO -->
						<div type="input" id="FinacType" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>등록일</th>
					<td>
						<div type="input" id="RegisterTime" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>금융기관</th>
					<td>
						<div type="input" id="FinacName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>주소</th>
					<td>
						<div type="input" id="FinacAddress" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>금융기관명(수정)</th>
					<td>
						<div type="input" id="EditFinacName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>담당자명</th>
					<td>
						<div type="input" id="FinacManager" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>		
				<tr>
					<th>사업자번호</th>
					<td>
						<div type="input" id="BusinessRstNumber" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>담당자 번호</th>
					<td>
						<div type="input" id="ManagerPhone" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>법인등록번호</th>
					<td>
						<div type="input" id="CopRstNumber" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>전화번호</th>
					<td>
						<div type="input" id="CorpPhone" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>대표자</th>
					<td>
						<div type="input" id="OwnerName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>비고</th>
					<td>
						<div type="input" id="Note" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>