<!DOCTYPE html>
<html lang="ko">
<head>
<style>
</style>
<script>
moca.TO_101.___ready = function(args){
	moca.TO_101.exe({
		url : moca._domain+moca._contextRoot+"/TO_101/selectTsCarDbMngListCnt.do",
		loadingbar:false,
		data : {
			"header" : moca.header,
			"body" : {
				}
		},			
		callback : function(response){
			var cList = response.tsCarDbMngCntList;
			(cList[0].cnt == 0)? $(moca.TO_101.getObj("t1")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t1")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[0].cnt));
			(cList[1].cnt == 0)? $(moca.TO_101.getObj("t2")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t2")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[1].cnt));
			(cList[2].cnt == 0)? $(moca.TO_101.getObj("t3")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t3")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[2].cnt));
			(cList[3].cnt == 0)? $(moca.TO_101.getObj("t4")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t4")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[3].cnt));
			(cList[4].cnt == 0)? $(moca.TO_101.getObj("t5")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t5")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[4].cnt));
			(cList[5].cnt == 0)? $(moca.TO_101.getObj("t6")).find('.tab_badge').css("visibility","hidden"):$(moca.TO_101.getObj("t6")).find('.tab_badge').css("visibility","visible").html(moca.comma(cList[5].cnt));
		}
	});
	
	moca.TO_101.sendParam(null,6);
};
moca.TO_101.fn_search = function(_callback){
	moca.TO_101.sendParam(null,$(moca.TO_101.getObj("tab2")).find('li.active').attr('index'),null,_callback);
};
moca.TO_101.popId1 = 'POP_TO_000P06';
moca.TO_101.fn_pop = function(_thisObj){
	['차량세부정보 팝업']
	var o = {};
	o.id = moca.TO_101.popId1;
	o.url = '/html/TO/TO_000P06.html';
	o.type = "POPUP";
	o.modal = "false";
	o.title = 'TS차량세부정보';
	o.callback = moca.TO_101.fn_pop_callback;
	o.scopeId = moca.TO_101.pageId;
	o.data = {};
	
	moca.popup(o,_thisObj);
};
moca.TO_101.fn_pop_callback = function(_json){
	if(_json != null){
		alert(_json);
	}
};

moca.TO_101.sendParam = function(_tabContentId,_tabContentIndex,_tabContentObj,_callback){
	var msg = '';
	if(_tabContentIndex == 1){
		msg = "<strong>전체데이터 약30만건기준 10초~15초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}else if(_tabContentIndex == 2){
		msg = "<strong>승용데이터 약5만건기준 1초~3초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}else if(_tabContentIndex == 3){
		msg = "<strong>승합데이터 약5만건기준 1초~3초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}else if(_tabContentIndex == 4){
		msg = "<strong>화물데이터 약15만건기준 5초~10초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}else if(_tabContentIndex == 5){
		msg = "<strong>기타데이터 약1만건기준 1초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}else if(_tabContentIndex == 6){
		msg = "<strong>친환경데이터 약1만건기준 1초 정도 소요됩니다.<br>잠시만 기다려주세요.</span>";
	}
	moca.TO_101.exe({
		url : moca._domain+moca._contextRoot+"/TO_101/tsCarDbMngList.do",
		loadingbar:true,
		loadingInfo:{type:"pc",className:"_modal",content:msg},
		data : {
			"header" : moca.header,
			"body" : {
				"inqType":(_tabContentIndex-1)+'',
				"specMgmtNumber":moca.getValue(moca.TO_101.getObj("keyWordSpecMgmtNumber")),
				"searchCarName":moca.getValue(moca.TO_101.getObj("keyWordCarName")),
				"searchFormName":moca.getValue(moca.TO_101.getObj("keyWordFormName")),
				}
		},			
		callback : function(response){
			if(_tabContentIndex == '1'){
				moca.TO_101S01.drawGrid('grd_09_S01',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S01.getObj('grd_09_S01');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}else if(_tabContentIndex == '2'){
				moca.TO_101S02.drawGrid('grd_09_S02',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S02.getObj('grd_09_S02');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}else if(_tabContentIndex == '3'){
				moca.TO_101S03.drawGrid('grd_09_S03',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S03.getObj('grd_09_S03');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}else if(_tabContentIndex == '4'){
				moca.TO_101S04.drawGrid('grd_09_S04',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S04.getObj('grd_09_S04');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}else if(_tabContentIndex == '5'){
				moca.TO_101S05.drawGrid('grd_09_S05',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S05.getObj('grd_09_S05');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}else if(_tabContentIndex == '6'){
				moca.TO_101S06.drawGrid('grd_09_S06',moca.getResList(response,"tsCarDbMngList"));
				var g = moca.TO_101S05.getObj('grd_09_S06');
				g.setAttribute("selectedRealRowIndex","0");
				moca._setRowSelection(g);
			}

			moca.setFocus(moca.TO_101.getObj("keyWordCarName"));
			if(_callback){
				_callback();
			}
		}
	});
};

moca.TO_101.grd_0__onDblClick = function(_grd,rowIndex,colIndex,colId){
	var g;
	if(_grd.getAttribute("type") == 'button'){
		g = $(event.srcElement).closest('[type=grid]')[0];
	}else{
		g = _grd;
	}
	var r;
	if(rowIndex == null){
		r = g.getAttribute("selectedrealrowindex");
	}else{
		r = rowIndex;
	}
	var o = {};
	o.id = moca.TO_001.popId;
	o.url = '/html/TO/TO_000P06.html';
	o.type = "POPUP";
	o.modal = "false";
	o.title = 'TS차량 DB관리 상세';
	o.callback = moca.TO_101.fn_pop_callback;
	o.scopeId = moca.TO_101.pageId;
	o.data = {"SpecMgmtNumber":g.list[r].SpecMgmtNumber};
	moca.popup(o,_grd);
};

moca.TO_101.display_displacement = function(_value,_grd,_rowIndex){
	if(_value != "" && _value != null){
		_value = moca.comma(_value)+" cc";
	}
	return _value;
};
moca.TO_101.display_ridingCapacity = function(_value,_grd,_rowIndex){
	if(_value != "" && _value != null){
		_value = moca.comma(_value)+" 명";
	}
	return _value;
};
</script>
</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"TO_101","sreenNm":"TS차량 DB관리","sreenPath":"Quick Menu,TS차량 DB관리"}'
			></div>
			<div class="moca_shbox">
				<div class="shbox_inner">
					<table class="tb">
						<tbody>
							<tr>
								<th class="tb_th pr10">제원관리번호</th>
								<td class="tb_td">
									<div type="input" id="keyWordSpecMgmtNumber" class="mocaInput" innerClass="" keyMask="enterSearch"></div>
								</td>
								<th class="tb_th pr10">차명</th>
								<td class="tb_td">
									<div type="input" id="keyWordCarName" class="mocaInput" innerClass=""  keyMask="enterSearch"></div>
								</td>
								<th class="tb_th pr10">형식</th>
								<td class="tb_td">
									<div type="input" id="keyWordFormName" class="mocaInput" innerClass=""  keyMask="enterSearch"></div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.TO_101.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			<div type="tab" id="tab2" class="moca_layer_tab TO_009" style="" onTabHeaderclick="moca.TO_101.sendParam"
			list='[
				{"position":"left","id":"t1","label":"전체","src":"/html/TO/TO_101S01.html"},
				{"position":"left","id":"t2","label":"승용","src":"/html/TO/TO_101S02.html"},
				{"position":"left","id":"t3","label":"승합","src":"/html/TO/TO_101S03.html"},
				{"position":"left","id":"t4","label":"화물","src":"/html/TO/TO_101S04.html"},
				{"position":"left","id":"t5","label":"기타","src":"/html/TO/TO_101S05.html"},
				{"position":"left","id":"t6","label":"친환경","src":"/html/TO/TO_101S06.html","active":"true"}
			]'
			 >
			</div>
		</div>	
	</div>
</div>
</body>
</html>