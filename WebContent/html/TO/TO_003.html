<!DOCTYPE html>
<html lang="ko">
<head>
<style>
</style>
<script>
moca.TO_003.___ready = function(args){
	moca.TO_003.code({
		"grd_03.mobileCarrierMajor":{code:"mobileCarrierMajor"},
		"grd_03.sex":{code:"sex"},
		"grd_03.joinType":{code:"joinType"},
		"grd_03.leaveYn":{code:"leaveYn"}
	},
	function(){
		moca.TO_003.fn_search();
	});
};

moca.TO_003.popId = 'TO_000P05';
moca.TO_003.fn_pop = function(_thisObj){
	['회원정보상세 팝업']
	var _grd = moca.TO_003.getObj("grd_03");
	var selectedRealRowIndex = _grd.getAttribute('selectedRealRowIndex');
	if(selectedRealRowIndex == null){
		selectedRealRowIndex = "0";
	}
	var o = {};
	o.id = moca.TO_003.popId;
	o.url = '/html/TO/TO_000P05.html';
	o.type = "POPUP";
	o.modal = "false";
	o.title = '회원정보상세';
	o.callback = moca.TO_003.fn_pop_callback;
	o.scopeId = moca.TO_003.pageId;
	o.data = {"idx":_grd.list[selectedRealRowIndex].idx};
	moca.popup(o,_thisObj);
};

moca.TO_003.fn_pop_callback = function(_json){
	if(_json != null){
		alert(_json);
	}
};

moca.TO_003.grd_03__onDblClick = function(_grd,rowIndex,colIndex,colId){
	var o = {};
	o.id = moca.TO_003.popId;
	o.url = '/html/TO/TO_000P05.html';
	o.type = "POPUP";
	o.modal = "true";
	o.title = '회원정보상세';
	o.callback = moca.TO_003.fn_pop_callback;
	o.scopeId = moca.TO_003.pageId;
	o.data = {"idx":_grd.list[rowIndex].idx};
	moca.popup(o,_grd);
};

moca.TO_003.fn_search = function(_progress){
	moca.TO_003.exe({
		url : moca._domain+moca._contextRoot+"/TO_003/userList.do",
		loadingbar:(_progress==null)? true:_progress,
		data : {
			"header" : moca.header,
			"body" : {
				"searchTxt":moca.getValue(moca.TO_003.getObj("keyWordPhoneNumber")).replace(/-/g,''),
				"searchTxt2":moca.getValue(moca.TO_003.getObj("keyWordUserName"))
			}
		},			
		callback : function(response){
			moca.TO_003.drawGrid('grd_03',moca.getResList(response,"userList"));
			var g = moca.TO_003.getObj('grd_03');
			g.setAttribute("selectedRealRowIndex","0");
			moca._setRowSelection(g);
			moca.setFocus(moca.TO_003.getObj("keyWordPhoneNumber"));
		}
	});
};

moca.TO_003.new_yn_format = function(_value,_grd,_rowIndex){
 	if(_value == "" ||_value == null){
		_value = '신규'
		return _value;
	}
};

moca.TO_003.updateTime_format = function(_value,_grd,_rowIndex){
	if(moca.trim(_value) == "" || _value == null){
		return _grd.list[_rowIndex].registerTime;
	}else{
		return _value;
	}
};

</script>
</head>
<body>
	<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"TO_003","sreenNm":"회원관리","sreenPath":"Quick Menu,회원관리"}'
			></div>
			
			<div class="moca_shbox">
				<div class="shbox_inner">
					<table class="tb">
						<tbody>
							<tr>
								<th class="tb_th pr10">핸드폰 번호</th>
								<td class="tb_td">
									<div type="input" id="keyWordPhoneNumber" keyMask="enterSearchEvt|onlyPhoneEvt" class="mocaInput" ></div>
								</td>
								<th class="tb_th pr10">회원명</th>
								<td class="tb_td">
									<div type="input" id="keyWordUserName" keyMask="enterSearchEvt" class="mocaInput" ></div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.TO_003.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			<div type="grid" class="moca_grid toolbar sc_row1" default_cell_height="26px" id="grd_03" 
					toolbar_search_size="false"
					toolbar_col_showhide="false"
					toolbar_detail="false"
					toolbar_exup="false"
					toolbar_exdn="false"
					toolbar_addrow="false"
					toolbar_delrow="false"
					toolbar_nextbtn="false"
					toolbar_full="true"
					onDblClick = "moca.TO_003.grd_03__onDblClick"
					toolbar_grid_button1='{"position":"right","id":"button1","label":"상세보기","onclick":"moca.TO_003.fn_pop","addClass":""}'
					
					label="총건수">
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px"><!-- 순번 -->
								<col style="width:60px"><!-- Idx -->
								<col style="width:140px"><!-- 회원구분 -->
								<col style="width:100px"><!-- 신규/기존 구분 -->
								<col style="width:100px"><!-- 최초가입일-->
								<col style="width:100px"><!-- 최종가입일 -->
								<col style="width:100px"><!-- 회원명 -->
								<col style="width:130px"><!-- 생년월일 -->
								<col style="width:60px"><!-- 성별 -->
								<col style="width:120px"><!-- 통신사 -->
								<col style="width:120px"><!-- 핸드폰번호-->
								<col style=""><!-- 이메일-->
								<col style="width:100px"><!-- 보호번호(비번)-->
								<col style="width:80px"><!-- 적용유무-->
								<col style="width:150px"><!-- 탈퇴일-->
						</colgroup>
						<thead>
							<tr>  
								<th id="H_rowNum">순번</th>
								<th id="H_rowNum">ID</th>
								<th id="H_a01">회원구분</th>
								<th id="H_a02">신규/기존 구분</th>
								<th id="H_a03">최초가입일</th>
								<th id="H_a04">최종수정일</th>
								<th id="H_a05">회원명</th>
								<th id="H_a06">생년월일</th>
								<th id="H_a07">성별</th>
								<th id="H_a08">통신사</th>
								<th id="H_a09">핸드폰번호</th>
								<th id="H_a10">이메일</th>
								<th id="H_a11">보호번호(비번)</th>
								<th id="H_a12">탈퇴여부</th>
								<th id="H_a13">탈퇴일</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="rowNum" name="순번" celltype="input" style="" readonly="true" displayFunction="moca.fn_display_rownum"></td>
								<td id="idx" name="ID" celltype="input" style="" readonly="true" ></td>
								<td id="joinType" name="회원구분"  
									celltype="select" cdField="CODE" nmField="CODE_NM" displayFormat="[label]"
									tooltip="true" style="" readonly="true" required="false">
								<td id="newYn" name="신규/기존 구분"  celltype="input" tooltip="true" style="" readonly="true" required="false" displayFunction="moca.TO_003.new_yn_format"></td>
								<td id="registerTime" name="최초가입일"  celltype="input" readonly="true" required="false"></td>
								<td id="updateTime" name="최종가입일"  celltype="input" tooltip="true" style="" readonly="true" required="false" displayFunction="moca.TO_003.updateTime_format" ></td>
								<td id="name" name="회원명" celltype="input" style="" readonly="true" required="false"  displayFunction="" ></td>
								<td id="birthDate" name="생년월일"  celltype="input" style="" readonly="true" required="false" displayFunction=""></td>	
								<td id="sex" name="성별"  
									celltype="select" cdField="CODE" nmField="CODE_NM" displayFormat="[label]"
									tooltip="true" style="" readonly="true" required="false">
								<td id="mobileCarrierMajor" name="통신사"  
									celltype="select" cdField="CODE" nmField="CODE_NM" displayFormat="[label]"
									tooltip="true" style="" readonly="true" required="false">
								</td>	
								<td id="mobilePhone" name="핸드폰번호"  celltype="input" style="" readonly="true" displayFunction="moca.telFormat"></td>
								<td id="email" name="이메일"  celltype="input" style="text-align:left" readonly="true" displayFunction=""></td>
								<td id="secretKey" name="보호번호(비번)"  celltype="input" style="" readonly="true" displayFunction=""></td>
								<td id="leaveYn" name="탈퇴여부"  
									celltype="select" cdField="CODE" nmField="CODE_NM" displayFormat="[label]"
									tooltip="false" style="" readonly="true" required="false">
								</td>
								<td id="leaveTime" name="탈퇴일"  celltype="input" style="" readonly="true" displayFunction=""></td>
							</tr>
						</tbody>
					</table>				
			</div>		
		</div>	
	</div>
</div>
</body>
</html>