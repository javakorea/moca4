<!DOCTYPE html>
<html lang="ko">
<head>
<style>
/* .moca_wrap{min-width:1600px}  */
</style>
<script>
moca.TO_002.___ready = function(args){
	moca.TO_002.exe({
		url : moca._domain+moca._contextRoot+"/TO_002/carAnalysis.do",
		loadingbar:true,
		data : {
			"header" : moca.header,
			"body" : {
				"inqType":"2",
				}
		},			
		callback : function(response){
			moca.TO_002.drawGrid('grd_02',moca.getResList(response,"carAnalysisList"));
			var g = moca.TO_002.getObj("grd_02");
			g.setAttribute("selectedRealRowIndex","0");
			moca._setRowSelection(g);
			moca.setFocus(moca.TO_002.getObj("CAR_NUM"));
		}
	});
};

moca.TO_002.popId1 = 'TO_000P03';
moca.TO_002.fn_pop = function(_thisObj){
	['차량정보상세 팝업']
	var _grd = moca.TO_002.getObj("grd_02");
	var selectedRealRowIndex = _grd.getAttribute('selectedRealRowIndex');
	if(selectedRealRowIndex == null){
		selectedRealRowIndex = "0";
	}
	var o = {};
	o.id = moca.TO_002.popId1;
	o.url = '/html/TO/TO_000P03.html';
	o.type = "POPUP";
	o.modal = "false";
	o.title = '차량정보상세';
	o.callback = moca.TO_002.fn_pop_callback;
	o.scopeId = moca.TO_002.pageId;
	o.data = {"RegistrationIndex":_grd.list[selectedRealRowIndex].idx};
	moca.popup(o,_thisObj);
};

moca.TO_002.grd_02__onDblClick = function(_grd,rowIndex,colIndex,colId){
	var o = {};
	o.id = moca.TO_002.popId1;
	o.url = '/html/TO/TO_000P03.html';
	o.type = "POPUP";
	o.modal = "false";
	o.title = '차량정보상세';
	o.callback = moca.TO_002.fn_pop_callback;
	o.scopeId = moca.TO_002.pageId;
	o.data = {"RegistrationIndex":_grd.list[rowIndex].idx};
	moca.popup(o,_grd);
};

moca.TO_002.fn_search = function(){
		if(moca.trim(moca.getValue(moca.TO_002.getObj("CAR_NUM"))) != '' && moca.trim(moca.getValue(moca.TO_002.getObj("OWNER_NAME"))) != ''){
			moca.TO_002.exe({
				url : moca._domain+moca._contextRoot+"/TOM_26/mobile/sendCooconOp.do",
				loadingbar:true, 
				loadingInfo:{type:"pc",className:"_modal",content:"<strong>제원정보를 분석하는 중…</strong> <span>잠시만 기다려주세요!<br>차량 분석에 약 30초~1분이 소요됩니다.<br>분석 후 페이지가 전환됩니다.</span>"},
				data : {
					"header" : moca.header,
					"body" : {
						"CAR_NUM":moca.getValue(moca.TO_002.getObj("CAR_NUM")).replace(/\s/g,'')+"",
						"OWNER_NAME":moca.getValue(moca.TO_002.getObj("OWNER_NAME")).replace(/\s/g,'')+""
						}
				},			
				callback : function(response){
					if(response.statusCd == '00000000'){
						moca.TO_002.drawGrid('grd_02',moca.getResList(response,"carAnalysisList"));
						var g = moca.TO_002.getObj("grd_02");
						g.setAttribute("selectedRealRowIndex","0");
						moca._setRowSelection(g);
						moca.setValue(moca.TO_002.getObj("CAR_NUM"),'');
						moca.setValue(moca.TO_002.getObj("OWNER_NAME"),'');
					}else{
						moca.alert("["+moca.trim(response.statusCd)+"]차량정보오류");
					}
					

				}
			});
		}else{
			moca.TO_002.exe({
				url : moca._domain+moca._contextRoot+"/TO_002/carAnalysis.do",
				loadingbar:true,
				data : {
					"header" : moca.header,
					"body" : {
						"inqType":"2",
						"searchTxt":moca.getValue(moca.TO_002.getObj("keyWord"))
					}
				},			
				callback : function(response){
					moca.TO_002.drawGrid('grd_02',moca.getResList(response,"carAnalysisList"));
					var g = moca.TO_002.getObj("grd_02");
					g.setAttribute("selectedRealRowIndex","0");
					moca._setRowSelection(g);
				}
			});
		}

};



moca.TO_002.RegisterTime2 = function(_value,_grd,_rowIndex){
	return _grd.list[_rowIndex].RegisterTime;
};
</script>
</head>
<body>
	<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="moca_tab_cont" style="height:100%">
		<div class="moca_cont_wrap flex fcol">
			<div type="wframe" class="moca_titbox cm" id="titbox" tag="moca:titbox" 
				src="/html/titlebox.html"
				data = '{"sreenCd":"TO_002","sreenNm":"등록원부조회","sreenPath":"등록원부조회"}'
			></div>
			<div class="moca_shbox">
				<div class="shbox_inner">
					<div class="flex fwrap">
						<div class="tb">
							<span class="tb_th">차량번호</span>
							<span class="tb_td">
								<div type="input" id="CAR_NUM" keyMask="enterSearchEvt" class="mocaInput"  style=""  readonly="false" ></div>
							</span>
						</div>
						<div class="tb">
							<span class="tb_th">소유자명</span>
							<span class="tb_td">
								<div type="input" id="OWNER_NAME" keyMask="enterSearchEvt" class="mocaInput"  style=""  readonly="false" ></div>
							</span>
						</div>
						<div class="tb">
							<span class="tb_th">기존조회차량정보검색</span>
							<span class="tb_td">
								<div type="input" id="keyWord" keyMask="enterSearchEvt" class="mocaInput"  style=""  readonly="false" ></div>
							</span>
						</div>
					</div>
				</div>
				<div class="btn_shbox">
					<button type="button" class="button btn_sc" onclick="moca.TO_002.fn_search(this)"><i class="fas fa-search"></i><span>조회</span></button>
				</div>
			</div>
			<!-- 
				> 그리드내에있는 체크박스사용법
				API : moca.getObj(그리드아이디).getCheckbox(체크박스아이디);
				return : JSON{id,checked,value}
				ex)....................................................................
				호출 : moca.getObj('grd_1').getCheckbox("check1");
				응답 : {id: "check1", checked: true, value: "1"}
				사용예 : if(moca.getObj('grd_1').getCheckbox("check1").checked){...};
				
				설정예시:
				toolbar_grid_checkbox1='{"position":"left","id":"check1","label":"요약보기","value":"1","checked":"true","onclick":"moca.TO_002.fn_show_summmery"}'
				toolbar_grid_combo='{"position":"left","id":"button1","label":"라벨","onclick":"moca.TO_002.fn_research","value":"","width":"150px"}'
						
						
						toolbar_grid_label_input_1='{"position":"left","id":"button1","label":"라벨","onclick":"moca.TO_002.fn_research","value":"","width":"150px"}'
						toolbar_grid_label_1='{"position":"left","id":"button1","label":"라벨","onclick":"moca.TO_002.fn_research"}'
						toolbar_grid_checkbox2='{"position":"left","id":"check_title","label":"제목","value":"1","checked":"true","onclick":"moca.TO_002.fn_show_summmery"}'
						toolbar_grid_checkbox3='{"position":"left","id":"check_summery","label":"요약","value":"1","checked":"true","onclick":"moca.TO_002.fn_show_summmery"}'
						toolbar_grid_input1='{"position":"left","id":"input1","value":"","width":"150px"}'
						toolbar_grid_button3='{"position":"left","id":"button3","label":"결과내재검색","onclick":"moca.TO_002.fn_research"}'
						toolbar_grid_label_combo='{"position":"left","id":"button1","label":"라벨2","onclick":"moca.TO_002.fn_research","value":"","width":"100px"}'
						toolbar_grid_radio='{"position":"left","id":"radio1","label":"radio1","onclick":"moca.TO_002.fn_research","value":[{"label":"보기","value":"1","checked":"1"},{"label":"안보기","value":"0"}],"width":"100px"}'
			-->
			<div type="grid" class="moca_grid toolbar fauto mt12" default_cell_height="26px" id="grd_02" 
					toolbar_search_size="false"
					toolbar_col_showhide="false"
					toolbar_detail="false"
					toolbar_exup="false"
					toolbar_exdn="false"
					toolbar_addrow="false"
					toolbar_delrow="false"
					toolbar_nextbtn="false"
					toolbar_full="true"
					onDblClick = "moca.TO_002.grd_02__onDblClick"
					toolbar_grid_button2='{"position":"right","id":"button4","label":"차량정보상세보기","onclick":"moca.TO_002.fn_pop"}'
					label="등록차량">
					<table style="width: 100%">
						<colgroup>
								<col style="width:60px"><!-- 순번 -->
								<col style="width:50px"><!-- Idx -->
								<col style="width:80px"><!-- 자동차번호 -->
								<col style="width:150px"><!-- 자동차소유자명 -->
								<col style="width:140px"><!-- 요청일시-->
								<col style="width:60px"><!-- 정상유무 -->
								<col style="width:230px"><!-- 차명 -->
								<col style="width:150px"><!-- 현소유자명 -->
								<col style="width:100px"><!-- 압류저당촉탁유무 -->
								<col style="width:100px"><!-- 용도및차종-->
								<col style="width:80px"><!-- 모델연식-->
								<col style="width:200px"><!-- 차대번호-->
								<col style="width:140px"><!-- 조회일시-->
								<col style=""><!-- 비고-->
						</colgroup>
						<thead>
							<tr>
								<th id="H_rowNum">순번</th>
								<th id="H_Idx">ID</th>
								<th id="H_vehicleNumber">자동차번호</th>
								<th id="H_ownerName">자동차소유자명</th>
								<th id="H_requestTime">요청일시</th>
								<th id="H_status">정상유무</th>
								<th id="H_vehicleName">차명</th>
								<th id="H_nowOwnerName">현소유자명</th>
								<th id="H_sellerName">압류저당촉탁유무</th>
								<th id="H_vehicleType">용도및차종</th>
								<th id="H_modelYear">모델연식</th>
								<th id="H_chassisNumber">차대번호</th>
								<th id="H_searchTime">조회일시</th>
								<th id="H_remark">비고</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td id="rowNum" name="순번" celltype="input" style="" readonly="true" displayFunction="moca.fn_display_rownum"></td>
								<td id="idx" name="ID" celltype="input" style="" readonly="true" ></td>
								<td id="RegNumber" name="자동차번호"  celltype="input" tooltip="true" style="" readonly="true"></td>
								<td id="LastOwner" name="자동차소유자명"  celltype="input" tooltip="true" style="text-align:left" readonly="true"></td>
								<td id="RegisterTime" name="요청일시"  celltype="input" readonly="true"></td>
								<td id="PassYn" name="정상유무"  celltype="input" tooltip="true" style="" readonly="true"></td>
								<td id="carName" name="차명" celltype="input" style="text-align:left" readonly="true"></td>
								<td id="LastOwner2" name="현소유자명"  celltype="input" style="" readonly="true"></td>	
								<td id="SeizeCollateralEntrustYn" name="압류저당촉탁유무"  celltype="input" style="" readonly="true"></td>	
								<td id="PurposeType" name="용도및차종"  celltype="input" style="" readonly="true"></td>
								<td id="ModelYear" name="모델연식"  celltype="input" style="" readonly="true"></td>
								<td id="ChassisNumber" name="차대번호"  celltype="input" style="" readonly="true"></td>
								<td id="RegisterTime2" name="조회일시"  celltype="input" style="" readonly="true" displayFunction="moca.TO_002.RegisterTime2"></td>
								<td id="remark" name="비고"  celltype="input" style="" readonly="true"></td>
							</tr>
						</tbody>
					</table>				
			</div>	

		</div>	
	</div>
</div>
</body>
</html>