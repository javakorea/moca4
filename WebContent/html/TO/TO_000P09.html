<!DOCTYPE html>
<html lang="ko">
<head meta_width="650px" meta_height="272px">
<title>금융기관DB정보상세</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca.css">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca_layout.css">
<script language="JavaScript" src="../../moca/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../moca/js/moca_ui.js"></script>
<script language="JavaScript" src="../../moca/js/moca.js"></script>
<script language="JavaScript" src="../../moca/js/testCalendar.js"></script>
<script>
moca.TO_000P09.___ready = function(args){
	moca.TO_000P09.emptyList = {"FinacType":"","RegisterTime":"","FinacName":"","FinacAddress":"","EditFinacName":"","FinacManager":"","BusinessRstNumber":"","ManagerPhone":"","CopRstNumber":"","CorpPhone":"","OwnerName":"","Note":""};
	moca.TO_000P09.code({
		"FinacType":{code:"finacType"}
	},
	function(){
		moca.TO_000P09.setFormValue('form_3','RegisterTime',dateLib.getToday('-')); //등록일
	});

};
moca.TO_000P09.setValue = function(_data){

};

moca.TO_000P09.fn_save = function(_this){
	if(moca.confirm('저장하시겠습니까?',function(result){
		if(result == 'Y'){
			if((moca.getValue(moca.TO_000P09.getObj('FinacName')) != "") &&
					(moca.getValue(moca.TO_000P09.getObj('FinacAddress')) != "")&&
					(moca.getValue(moca.TO_000P09.getObj('CorpPhone')) != "")){
					moca.TO_000P09.exe({
						url : moca._domain+moca._contextRoot+"/TO_013/updateFincialDbInfo.do",
						loadingbar:true,
						data : {
							"header" : moca.header,
							"body" : {
								uploadType : "1",
								fincialList : [moca.TO_000P09.fn_getList()]
							}
						},			
						callback : function(response){
							if(response.cnt > 0){
								moca.alert('성공적으로 저장하였습니다.');
								moca.TO_013.fn_search();
								moca.popClose(moca.TO_000P09.pageId);
							}else{
								moca.error('업데이트에 실패하였습니다.');
							}
						}
					});
				}else{
					moca.error('필수입력값을 입력해주세요.');
				}
		}
	}));
};

moca.TO_000P09.fn_getList = function(){
	var _list = moca.TO_000P09.emptyList;
		var data = _list;
		data.FinacType = moca.TO_000P09.getComboLabel('FinacType'),
		data.FinacName = moca.getValue(moca.TO_000P09.getObj('FinacName')),
		data.FinacAddress = moca.getValue(moca.TO_000P09.getObj('FinacAddress')),
		data.EditFinacName = moca.getValue(moca.TO_000P09.getObj('EditFinacName')),
		data.FinacManager = moca.getValue(moca.TO_000P09.getObj('FinacManager')),
		data.BusinessRstNumber = moca.getValue(moca.TO_000P09.getObj('BusinessRstNumber')),
		data.ManagerPhone = moca.getValue(moca.TO_000P09.getObj('ManagerPhone')),
		data.CopRstNumber = moca.getValue(moca.TO_000P09.getObj('CopRstNumber')),
		data.CorpPhone = moca.getValue(moca.TO_000P09.getObj('CorpPhone')),
		data.OwnerName = moca.getValue(moca.TO_000P09.getObj('OwnerName')),
		data.Note = moca.getValue(moca.TO_000P09.getObj('Note'))
	
	moca.TO_000P09.nowList = _list;
	return moca.TO_000P09.nowList;
};

moca.TO_000P09.setToday = function(_data){
	var Now = new Date();
	var NowTime = Now.getFullYear();
	NowTime += '-' + Number(Now.getMonth() + 1) ;
	NowTime += '-' + Now.getDate();
	return NowTime;
};


</script>
<style>
</style>
</head>
<body>
	<div class="moca_pop_cont_wrap">
		<div type="form" id="form_3" class="moca_table toolbar" style=""
				label="금융기관DB정보 추가등록"
				showRowSelection="false"
				addition='[
				{"type":"button","position":"right","id":"btn_save","label":"저장","onclick":"moca.TO_000P09.fn_save","addClass":""}
					]'
				>
			<table class="moca_table_cont th_tar">
				<colgroup>
					<col style="width:120px">
					<col>
					<col style="width:120px">
					<col>
				</colgroup>
				<tr>
					<th>구분</th>
					<td>
						<!-- COMBO -->
						<div type="combo" id="FinacType" class="moca_combo req" innerOnchange="" style="width:100%" displayFormat="[label]" cdField="code" nmField="codeNm"></div></td>
					</td>
					<th>등록일</th>
					<td>
						<div type="input" id="RegisterTime" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true" displayFormat="moca.TO_000P09.setToday"></div>
					</td>
				</tr>
				<tr>
					<th>금융기관</th>
					<td>
						<div type="input" id="FinacName" class="mocaInput req" innerClass="" onclick="" style="" value="" required="true" readonly="false"></div>
					</td>
					<th>주소</th>
					<td>
						<div type="input" id="FinacAddress" class="mocaInput req" innerClass="" onclick="" style="" value="" required="true" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>금융기관명(수정)</th>
					<td>
						<div type="input" id="EditFinacName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>담당자명</th>
					<td>
						<div type="input" id="FinacManager" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>		
				<tr>
					<th>사업자번호</th>
					<td>
						<div type="input" id="BusinessRstNumber" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>담당자 번호</th>
					<td>
						<div type="input" id="ManagerPhone" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>법인등록번호</th>
					<td>
						<div type="input" id="CopRstNumber" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>전화번호</th>
					<td>
						<div type="input" id="CorpPhone" class="mocaInput req" innerClass="" onclick="" style="" value="" required="true" readonly="false"></div>
					</td>
				</tr>
				<tr>
					<th>대표자</th>
					<td>
						<div type="input" id="OwnerName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
					<th>비고</th>
					<td>
						<div type="input" id="Note" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="false"></div>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>