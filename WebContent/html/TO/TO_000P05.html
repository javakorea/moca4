<!DOCTYPE html>
<html lang="ko">
<head meta_width="700px" meta_height="299px">
<title>회원정보상세</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca.css">
<link rel="stylesheet" type="text/css" href="../../moca/css/moca_layout.css">
<script language="JavaScript" src="../../moca/js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../moca/js/moca_ui.js"></script>
<script language="JavaScript" src="../../moca/js/moca.js"></script>
<script language="JavaScript" src="../../moca/js/testCalendar.js"></script>
<script>
moca.TO_000P05.___ready = function(args){
	if(args != null){
		moca.TO_000P05.args = args;
	};
	moca.TO_003.exe({
		url : moca._domain+moca._contextRoot+"/TO_003/userDetail.do",
		loadingbar:true,
		data : {
			"header" : moca.header,
			"body" : {
				"idx":moca.TO_000P05.args.parent.data.idx+''
				}
		},	
		callback : function(response){
			var data = response.userDetail;
			moca.TO_000P05.data = data;
			if(data.leaveTime == null){
				moca.TO_000P05.setFormValue('form_3','new_yn','신규'); //신규기존구분
			}else{
				moca.TO_000P05.setFormValue('form_3','new_yn','기존');
			}
			moca.TO_000P05.setFormValue('form_3','registerTime',data.registerTime); //최초가입일
			if(data.updateTime == "" || data.updateTime == null){
				moca.TO_000P05.setFormValue('form_3','updateTime',data.registerTime); //최종가입일
			}else{
				moca.TO_000P05.setFormValue('form_3','updateTime',data.updateTime); 
			}
			moca.TO_000P05.setFormValue('form_3','userName',data.name); //회원명
			moca.TO_000P05.setFormValue('form_3','birthDate',data.birthDate); //생년월일
			if(data.sex == '1'){  //성별
				moca.TO_000P05.setFormValue('form_3','sex','남자');
			}else if(data.sex == '2'){
				moca.TO_000P05.setFormValue('form_3','sex','여자');
			};
			if(data.mobileCarrierMajor == '0'){  //통신사
				moca.TO_000P05.setFormValue('form_3','mobileCarrierMajor','마이그레이션 사용자 중 통신사 정보가 없는 사용자');
			}else if(data.mobileCarrierMajor == '1'){
				moca.TO_000P05.setFormValue('form_3','mobileCarrierMajor','SKT');
			}else if(data.mobileCarrierMajor == '2'){
				moca.TO_000P05.setFormValue('form_3','mobileCarrierMajor','KT');
			}else if(data.mobileCarrierMajor == '3'){
				moca.TO_000P05.setFormValue('form_3','mobileCarrierMajor','LG');
			}else if(data.mobileCarrierMajor == '4'){
				moca.TO_000P05.setFormValue('form_3','mobileCarrierMajor','알뜰폰');
			};
			moca.TO_000P05.setFormValue('form_3','mobilePhone',moca.telFormat(data.mobilePhone)); //핸드폰번호
			moca.TO_000P05.setFormValue('form_3','email',data.email); //이메일
			moca.TO_000P05.setFormValue('form_3','userPassWord',data.password); //보호번호(비번)
			moca.TO_000P05.setFormValue('form_3','leaveYn',data.leaveYn); //회원상태
			moca.TO_000P05.setFormValue('form_3','leaveTime',data.leaveTime); //탈퇴일
			moca.TO_000P05.setFormValue('form_3','leaveReqId',data.leaveReqId); //탈퇴신청자
		}
	});
};
moca.TO_000P05.setValue = function(_data){

};

moca.TO_000P05.fn_save = function(_this){
	if(moca.confirm('저장하시겠습니까?',function(result){
		if(result == 'Y'){
			moca.TO_000P05.exe({
				url : moca._domain+moca._contextRoot+"/TO_003/updateUserList.do",
				loadingbar:true,
				data : {
					"header" : moca.header,
					"body" : {
						idx : moca.TO_000P05.args.parent.data.idx+'',
						leaveYn: moca.TO_000P05.getRadio('leaveYn').value
					}
				},			
				callback : function(response){
					if(response.error){
						moca.alert(response.error);
					}else{
						moca.alert(response.message);
						//moca.TO_003.fn_search(false);
					}
				}
			});
		}
	}));
};

</script>
<style>
</style>
</head>
<body>
	<div class="moca_pop_cont_wrap">
		<div type="form" id="form_3" class="moca_table toolbar" style=""
				label="회원정보상세"
				showRowSelection="false"
				addition='[
				{"type":"button","position":"right","id":"btn_apply","label":"적용","onclick":"moca.TO_000P05.fn_save","addClass":""}
					]'
				>
			<table class="moca_table_cont th_tar">
				<colgroup>
					<col style="width:120px">
					<col>
					<col style="width:120px">
					<col>
				</colgroup>
				<tr>
					<th>신규/기존 구분</th>
					<td>
						<div type="input" id="new_yn" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
						<!-- <div type="radio" class="mocaRadio" style="width:100%" id="new_yn" itemset='[{"label":"신규회원","value":"1","checked":"true"},{"label":"기존회원","value":"0"}]'></div> -->
					</td>
					<th>통신사</th>
					<td>
						<div type="input" id="mobileCarrierMajor" class="mocaInput" innerClass="" onclick="" style="" tooltip="true" value="" readonly="true"></div>
					</td>
				</tr>
				<tr>
					<th>최초가입일</th>
					<td>
						<div type="input" id="registerTime" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
					<th>핸드폰 번호</th>
					<td>
						<div type="input" id="mobilePhone" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
				</tr>
				<tr>
					<th>최종가입일</th>
					<td>
						<div type="input" id="updateTime" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
					<th>이메일</th>
					<td>
						<div type="input" id="email" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
				</tr>		
				<tr>
					<th>회원명</th>
					<td>
						<div type="input" id="userName" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
					<th>보호번호(비번)</th>
					<td>
						<div type="input" id="userPassWord" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
				</tr>
				<tr>
					<th>생년월일</th>
					<td>
						<div type="input" id="birthDate" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
					<th>회원상태</th>
					<td><!-- 탈퇴상태가 되었을 경우 readonly 수정불가 -->
						<div type="radio" class="mocaRadio" style="width:100%" id="leaveYn" itemset='[{"label":"회원","value":"N","checked":"true"},{"label":"탈퇴","value":"Y"}]'></div>
					</td>
				</tr>
				<tr>
					<th>성별</th>
					<td>
						<div type="input" id="sex" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
						<!-- <div type="radio" class="mocaRadio" style="width:100%" id="sex" itemset='[{"label":"남","value":"1","checked":"true"},{"label":"여","value":"0"}]'></div> -->
					</td>
					<th>탈퇴일</th>
					<td>
						<div type="input" id="leaveTime" class="mocaInput" innerClass="" onclick="" style="" value="" readonly="true"></div>
					</td>
				</tr>
				<tr>
					<th></th>
					<td></td>
					<th>탈퇴 신청자</th>
					<td>
						<div class="moca_input_group">
							<!-- <div type="input" id="p16_1" class="mocaInput" onclick="" style="width:40px" value="관리자" readonly="true"></div> -->
							<div type="input" id="leaveReqId" class="mocaInput" onclick="" style="width:90px" value="(김관리)" readonly="true"></div>
						</div>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>
</html>