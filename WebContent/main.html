<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="naver-site-verification" content="a104a8de14481f0bac1275366c3a53b78c048ac2" />
<link rel="stylesheet" type="text/css" href="./css/reset.css">
<link rel="stylesheet" type="text/css" href="./css/teammoca.css">
<link rel="stylesheet" type="text/css" href="./moca/css/fontawesome.css">
<link rel="stylesheet" type="text/css" href="./css/media.css">


<script>

moca.main.BD_CONTENT_FOR_BD_WS = {};

moca.main.___ready = function(args){
	moca.getContent(moca._domain+moca._contextRoot+"/images/home/main_img.svg",function(data) {
		$('#mainSvg').html(data);
	});
	moca.main.fn_search();
	initKakao(mocaConfig.getSocailLoginKakaoKey());
};
moca.main.boardType ='WS';
moca.main.fn_search = function(){
	var _today = moca.dateToString(new Date());
	var _todayStr = _today.year+_today.month+_today.day;
	var _fromStr = String(_today.year-1)+_today.month+_today.day;
	
    moca.main.exe({
        url : moca._domain+moca._contextRoot+"/EFC_BOARD/selectBoardList.do",
        loadingbar:true,
        data : {
            "header" : moca.header,
            "body" : {
            	"BOARD_TYPE":moca.main.boardType,
            	"FROM":_fromStr,
                "TO":_todayStr,
                "BOARD_SUPPORT": ['N', 'R', 'B']
            }
        },          
        callback : function(response){
        	var list = response.selectBoardList;
			var full_html = '';
			var _html = $('#tbl_BD_WS').html();
			for(var i=0; i < 5; i++){
				var row = list[i];
				full_html += _html.replace(/#BD_TITLE#/g,row.BOARD_TITLE).replace(/#BD_USERID#/g,row.BOARD_WRITER).replace(/#BD_DATE#/g,moca.longToDate(row.BOARD_DATE).substr(0,10)).replace(/#BD_CODE#/g,row.BOARD_IDX);
				moca.main.BD_CONTENT_FOR_BD_WS[row.BOARD_IDX] = row; 
			}
			$('#tbl_BD_WS').html(full_html);
			$('#tbl_BD_NOTICE').html(full_html);
        }
    });
};
moca.main.popId = 'main_pop_board';
moca.main.fn_pop_boardPop = function(_gubun,_bd_code){
	var row;
	var _title;
	if(_gubun == 'BD_WS'){
		row = moca.main.BD_CONTENT_FOR_BD_WS[_bd_code];
	}
		var _this = $('#ws_list')[0];
	    var o = {};
	    o.id = moca.main.popId;
	    o.url = '/html/EFC/EFC_BOARD_POP.html';
	    o.type = "POPUP";
	    o.modal = "true";
	    o.title = '게시글상세';
	    o.callback = moca.main.fn_pop_callback;
	    o.scopeId = moca.main.pageId;
	    o.data = {"PAGE_TYPE":'home',"BOARD_IDX":row.BOARD_IDX+'',"BOARD_PIDX":row.BOARD_PIDX+'',"BOARD_TITLE":row.BOARD_TITLE,"BOARD_TYPE":"WS"};
	    moca.popup(o,_this);
};

moca.main.fn_pop_boardMain = function(_gubun){
	var _this = $('#ws_list')[0];
    var o = {};
    o.id = moca.main.popId;
    o.url = '/html/EFC/EFC_BOARD.html';
    o.type = "POPUP";
    o.modal = "true";
    o.title = '웹스퀘어 게시판';
    o.callback = moca.main.fn_pop_callback;
    o.scopeId = moca.main.pageId;
    o.data = {"PAGE_TYPE":'home',"BOARD_TYPE":"WS"};
    moca.popup(o,_this);
};

moca.main.fn_pop_callback  = function(_gubun){
	
};

moca.main.fn_tel = function(_this){
	if(moca.getDevice() != "mobile"){
		moca.alert('<i style="display: block; font-size: 19px;" class="mb5">상담문의</i><a style="font-size:17px; color:#3650ff">010-9116-8072</a> <br/> 언제나 친절하게 상담해드리겠습니다.',function(result){});
	}else{
		moca.alert('<i style="display: block; font-size: 19px;" class="mb5">상담문의</i><a href="tel:010-9116-8072" style="font-size:17px; color:#3650ff">010-9116-8072</a> <br/> 언제나 친절하게 상담해드리겠습니다.',function(result){});
	}
}

function initKakao(_key){
	Kakao.init(_key);
	if(Kakao.Auth.getAccessToken()){
		loginChecker();
	}
};

function loginKakao(){
	Kakao.Auth.login({
		success: function(authObj) {
		Kakao.API.request({
			url: '/v2/user/me',
			success: function(response) {
				loginSetter(response.id,response.kakao_account.email,response.kakao_account.profile.nickname);
			},fail: function(error) {console.log(error);}
		});
		},fail: function(err) {},
	});
};

function loginSetter(_id,_email,_name){
	var loginInfo = {};
	loginInfo.id = _id;
	loginInfo.name = _name;
	loginInfo.email = _email;
	moca.setSs("loginTemp0",loginInfo);
	moca.main.exe({
		url : mocaConfig._domain+mocaConfig._contextRoot+"/main/selectMocaUserInfo.do",
        data : {
        	"header" : moca.header,
        	"body" : {
        		"USER_KAKAO_ID":_id+"",
        	}
        },			
		callback : function(response){
			if(response.selectMocaUserInfo != null){
				//곧바로 진행스텝으로
				moca.setSs("loginInfo",response.selectMocaUserInfo);
				$('#kakaoLogin').hide();
				$('#userName').show();
				$('#userName').html('<i class="fa fa-user mr5" aria-hidden="true"></i>'+response.selectMocaUserInfo.USER_NAME);
				//'1972981827' 팀모카
				//'1972997766' 성혜진
				//'1973964231' 김세창
				if(	   moca.getSs("loginTemp0").id == '1972981827'
					|| moca.getSs("loginTemp0").id == '1972997766' 		
					|| moca.getSs("loginTemp0").id == '1973964231' 		
				){
					$('#btnErp').show();
				}
			}else{
				moca.main.insertUserInfo(_id,_name,_email);
			}
		}
	});
};

moca.main.insertUserInfo = function(_id,_name,_email){
	//회원가입
	moca.main.exe({
		url : moca._domain+moca._contextRoot+"/main/insertUserInfo.do",
	    data : { 
	    	"header" : moca.header,
	    	"body" : {
	    		"USER_KAKAO_ID":_id+"",
	    		"USER_NAME":_name,
	    		"USER_EMAIL":_email,
	    	}
	    },			
		callback : function(response){
			moca.main.___ready();		
		}
	});
}

moca.main.fn_logout = function(){
	moca.confirm('로그아웃하시겠습니까?',function(result){
		if(result == 'Y'){
			moca.setSs("loginTemp0",null);
			loginChecker();
			top.location.href = moca._contextRoot;
		}
	});		
};
function loginChecker(){
	if(moca.getSs("loginTemp0") != null && moca.getSs("loginTemp0") != ''){
		$('#kakaoLogin').hide();
		$('#userName').show();
		$('#userName').html('<i class="fa fa-user mr5" aria-hidden="true"></i>'+moca.getSs("loginTemp0").name);
		//'1972981827' 팀모카
		//'1972997766' 성혜진
		//'1973964231' 김세창
		if(	   moca.getSs("loginTemp0").id == '1972981827'
			|| moca.getSs("loginTemp0").id == '1972997766' 		
			|| moca.getSs("loginTemp0").id == '1973964231' 		
		){
			$('#btnErp').show();
		}
	}else{
		$('#kakaoLogin').show();
		$('#userName').hide();
		$('#userName').html('');
	}
};
function goMoca(){
	location.href="/admin.do"
}


</script>
<style>
	
</style>
</head>
<body>
<div id="moca_tab_bridge1" class="moca_tab_panel" role="mdipanel" style="display:block;visibility:visible;">
	<div class="wrapper">
		<div class="wrapContent">
			<div class="header">
				<h1><a href="./index.html">MOCA</a></h1>
				 <button id="kakaoLogin" class="kakaoLogin fr" onclick="loginKakao()">
				 	<i></i>
				 	<span>Login</span>
				 </button>
				 <span style="display:none" class="btn_Erp" id="btnErp" onclick="goMoca()">ERP</span>
				 <span style="display:none" class="loginInfo" id="userName" onclick="moca.main.fn_logout()"></span>
			</div>
			<div class="container" style="overflow: inherit">
				<!-- WEB -->
				<div class="main_box">
					<div class="td fl">
						<div class="label">표준 웹 UI/UX</div>
						<p class="img1"><i class="fas fa-ellipsis-v"></i>HTML5을 기반으로 한  <br>Non ActiveX 표준웹 UI/UX</p>
					</div>
					<div class="td fl">
						<div class="label">듀얼 MDI</div>
						<p class="img2"><i class="fas fa-ellipsis-v"></i>동시에 여러 MDI속 <br>화면 작업이 가능한<br>차별화된 획기적인 듀얼 MDI</p>
					</div>
					<div class="td fl">
						<div class="label">적응형 UI</div>
						<p class="img3"><i class="fas fa-ellipsis-v"></i>다양한 해상도를 지원하는 <br>적응형 템플릿기반UI</p>
					</div>
					<div class="td fl">
						<div class="label">자체개발 컴포넌트</div>
						<p class="img4"><i class="fas fa-ellipsis-v"></i>성능저하의 대표적인 원인 IFRAME을 <br>사용하지않고 자체개발 고성능 컴포넌트를 제공합니다.</p>
					</div>
					<!-- <button class="arrow_right"><i class="fas fa-chevron-right"></i></button> -->
				</div>
				<div class="mocaBox cfx">
					<div class="componentImg">
						<div class="fl col5 main_img">
							<p><i class="fas fa-bolt" style="margin-right:5px"></i>귀사의 솔루션에 합리적인 비용으로 최고 성능의 제품을 제공하겠습니다.</p>
							<h3>사용자 중심의  UI/UX을 기반으로 한 표준 웹 솔루션<a href="html/teammoca/grid.html" target="_blank"><img src="./images/home/MOCA_CI_W.png" alt="moca"></a><i class="logo_next"></i>를 만나보세요!</h3>
							<div id="mainSvg" class="mainSvg"></div>
						</div>
						<div class="fl col5 main_img2">
							<img src="./images/home/main_img2.png" alt="moca메인이미지2">
						</div>
					</div>
				</div>
				<div class="mocaBox boardArea">
					<div style="height:176px; box-sizing:border-box">
						<div class="col5 fl p10">
							<div class="boardTable" id="ws_list">
								<span class="boardTitle"><i class="fas fa-comment-dots"></i>웹스퀘어게시판</span>
								<button class="boardMore fr"  onclick="moca.main.fn_pop_boardMain('BD_WS')"><i class="fas fa-plus-circle"></i>더보기</button>
								<table class="boardList">
									<colgroup>
										<col style="width:395px">
										<col style="">
										<col style="">
									</colgroup>
									<tbody id="tbl_BD_WS">
										<tr onclick="moca.main.fn_pop_boardPop('BD_WS','#BD_CODE#')">
											<td class="bdTitle">#BD_TITLE#</td>
											<td class="bdName tfc">#BD_USERID#</td>
											<td class="bdDate tfc">#BD_DATE#</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="col5 fr p10">
							<div class="boardTable" id="ws_list2">
								<span class="boardTitle"><i class="fas fa-comment-dots"></i>공지사항</span>
								<button class="boardMore fr"  onclick="moca.main.fn_pop_boardMain('BD_WS')"><i class="fas fa-plus-circle"></i>더보기</button>
								<table class="boardList">
									<colgroup>
										<col style="width:395px">
										<col style="">
										<col style="">
									</colgroup>
									<tbody id="tbl_BD_NOTICE">
										<tr onclick="moca.main.fn_pop_boardPop('BD_WS','#BD_CODE#')">
											<td class="bdTitle">#BD_TITLE#</td>
											<td class="bdName tfc">#BD_USERID#</td>
											<td class="bdDate tfc">#BD_DATE#</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
				<div class="mocaBox pt10 pb10">
					<div style="height:120px; box-sizing:border-box">
						<div class="fl mocastep step1">
							<div style="background: rgba(255, 255, 255, 0.15);">
								<span style="height: 37px; display: inline-block; color: #fff; text-align: center; padding: 9px; box-sizing: border-box; font-size: 14px;;">컨설팅 상담요청</span>
							</div>
							<p style="color:#fff; padding:10px; font-size:15px">컨설팅이 필요하시면 친절하게 상담해드리겠습니다.</p>
							<button onclick="moca.main.fn_tel(this)" style="width:115px; padding:3px 10px; display:inline-block; position:relative; top:1px; left:10px; color:#333; border-radius:20px; background:#fff; opacity:0.5">
								<a style="color:#333">상담 문의<i class="fas fa-angle-double-right" style="margin-left:5px"></a></i>
							</button>
							<span class="mainicon2 img1"></span>
						</div>
						<div class="fl mocastep step2">
							<div style="background: rgba(255, 255, 255, 0.15);">
								<span style="height: 37px; display: inline-block; color: #fff; text-align: center; padding: 9px; box-sizing: border-box; font-size: 14px;">모카기반 개발</span>
							</div>
							<p style="color:#fff; padding:10px; font-size:15px">개발을 하시기 전에 모카개발교육을 진행합니다.</p>
							<button style="width:115px; padding:3px 10px; display:inline-block; position:relative; top:1px; left:10px; color:#333; border-radius:20px; background:#fff; opacity:0.5">
								<a href="https://teammoca.atlassian.net/wiki/spaces/TEAMMOCA/pages/327695/MOCA+API+DOCUMENT" target="_blank" style="color:#333">모카개발가이드<i class="fas fa-angle-double-right" style="margin-left:5px"></i></a>
							</button>
							<span class="mainicon2 img3"></span>
						</div>
					
					</div>
				</div>
			</div>
		</div>
			<div class="footer">
				<div class="f_content">
					<h2><img src="./images/home/f_logo.png" style="width:85px"></h2>
					<p><span>경기도 성남시 분당구 서현로180번길 13</span><span>FAX : 031)707-2650</span><br><span>copyright © NEODIANSOFT, Inc All Rights Reserved. Created by TEAM MOCA</span></p>
					<div class="f_tel">
						<i class="fas fa-phone-alt"></i><span class="title">대표전화</span>
						<div><a href="#"> 010-9116-8072 &nbsp;/&nbsp;</a><a href="tel:02-584-0124">02-584-0124</a></div>
					</div>
				</div>
			</div>		
	</div>
</div>	
</body>
</html>