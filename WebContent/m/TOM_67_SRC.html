<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /> 
<meta http-equiv="Pragma" content="no-cache" /> 
<meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT">
<meta http-equiv="Expires" content="-1" />
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>모바일 웹 온라인 소유권 이전</title>
<link rel="stylesheet" type="text/css" href="../css/mobile.css">
<script>
	moca.TOM_67_SRC.___ready = function(args){
		
		if(moca.getSs("loginInfo") == null || window.history.length < 3){
			location.href = '/to';
		};
		
		moca.setHistory('TOM_67',{'title':'계좌등록은행선택','time':(new Date()).getTime()});
		//은행목록호출
    	moca.TOM_67_SRC.bankSearch();
	};
	function go(){
		if($(event.srcElement).attr('BankNm') != null){
			moca.setAs('BankNm',$(event.srcElement).attr('BankNm')+'');
			moca.setAs('BankCd',$(event.srcElement).attr('BankCd')+'');
			location.href="TOM_69.html";
		}else{
			moca.malert("은행을 선택하세요");
			return;
		}
	}
	moca.TOM_67_SRC.bankSearch = function(){
		//은행목록호출
    	moca.TOM_67_SRC.exe({
    		url : moca._domain+moca._contextRoot+"/TOM_67/mobile/bankList.do",
    		loadingbar:true,
    		loadingInfo:{type:"mobile",className:"_modal",content:"<span>잠시만 기다려주세요!</span>"},
            data : {
            	"header" : moca.header,
            	"body" : {
            		"searchTxt" : $('#searchTxt').val()
            	}
            },			
    		callback : function(response){
    			var list = response.bankList;
    			var lis = '';
    			for(var i=0; i < list.length; i++){
    				var bankCd = list[i].Bank_Cd;
    				var bankNm = list[i].Bank_Name;
    				var classNm = moca.TOM_67_SRC.getClassNm(bankCd);
    				
    				lis += '<li class="'+classNm+'"><input type="radio" name="rad_bank" id="rad2_16"> <label for="rad2_16" bankNm="'+bankNm+'" bankCd="'+bankCd+'">'+bankNm+'</label></li>';
    			}
    			
    			$('.rad_bank').html(lis);
    			$('#searchTxt').focus();
    		}
    	});
	};
	
	moca.TOM_67_SRC.getClassNm = function(bankCd){
		var classNm = "";
		switch (bankCd) {
			case "002": classNm = "kdb"; break;
			case "003": classNm = "ibk"; break;
			case "004": classNm = "kb"; break;
			case "007": classNm = "sh"; break;
			case "011": classNm = "nh"; break;
			case "020": classNm = "woori"; break;
			case "023": classNm = "sc"; break;
			case "031": classNm = "dgb"; break;
			case "032": classNm = "bnk"; break;
			case "034": classNm = "kj"; break;
			case "035": classNm = "jeju"; break;
			case "037": classNm = "jb"; break;
			case "039": classNm = "kn"; break;
			case "045": classNm = "kfcc"; break;
			case "048": classNm = "cu"; break;
			case "071": classNm = "post"; break;
			case "081": classNm = "hana"; break;
			case "088": classNm = "shinhan"; break;
			case "089": classNm = "k"; break;
			default: break;
		}
		return classNm;
	};
	
	moca.TOM_67_SRC.onkeyup = function(_this){
		var v = $(_this).val();
		if(v != null){
			v = v.toUpperCase();
		}
		var arr = $("li>label");
		var leng = arr.length;
		for(var i=0; i < leng; i++){
			var o = arr[i];
			$(o).parent().hide();
		}
		$("label:contains('"+v+"')").parent().show();
	};
	
	
	moca.TOM_67_SRC.back = function(){
		location.href = 'TOM_65.html';
	};
	moca.TOM_67_SRC.toCancel = function(){
		moca.mconfirm('소유권이전을 취소하시겠습니까?','',function(_result){
			if(_result == 'Y'){
				moca.TOM_67_SRC.exe({
					url : moca._domain+moca._contextRoot+"/TOM_60/mobile/cancelTransferOwner.do",
		            data : {
		            	"header" : moca.header,
		            	"body" : {
		            		Stage:"26",
		            		idx:moca.getSs("transferownerId")+""
		            	}
		            },		
					callback : function(response){
						
						if(response.error){
							moca.merror(response.error,'',function(){
								location.href='TOM_25.html?isCancel=true';
							});
						}else if(response.rePayResYn == 'N'){
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        		   location.href='TOM_25.html?isCancel=true';
			        	   });	
						}else{
							//polling후
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        	    	location.href='TOM_25.html?isCancel=true';
			        	    });	
						}

					}
				});
				
			}
		});
	};	
</script>
</head>
<body>
	<div class="wrap">
		<header class="titlebar">
			<button class="btn_back" type="button" onclick="moca.TOM_67_SRC.back()">이전페이지</button>
			<h2 class="tit"><a href="javascript:void(0)" onclick="moca.TOM_67_SRC.toCancel()">이전 취소</a></h2>
		</header>

		<div class="content fx2 jct2">
			<div class="top_txt">
				<p>
					등록하실 계좌의<br>은행을 선택해주세요.
				</p>
			</div>
			<div class="srhbox">				
				<input type="text" placeholder="찾으시는 은행이 있나요?" id="searchTxt" onkeyup="moca.TOM_67_SRC.onkeyup(this)">
				<span class="icon"></span>
			</div>
			<ul class="rad_bank" onclick="go()">
				<li class="kdb"><input type="radio" name="rad_bank"
					id="rad2_0" checked> <label for="rad2_0">산업은행</label>
				</li>
				<li class="ibk"><input type="radio" name="rad_bank"
					id="rad2_1"> <label for="rad2_1">기업은행</label>
				</li>
				<li class="kb"><input type="radio" name="rad_bank"
					id="rad2_2"> <label for="rad2_2">국민은행</label>
				</li>
				<li class="sh"><input type="radio" name="rad_bank"
					id="rad2_3"> <label for="rad2_3">수협중앙회</label>
				</li>
				<li class="nh"><input type="radio" name="rad_bank"
					id="rad2_4"> <label for="rad2_4">농협</label>
				</li>
				<li class="woori"><input type="radio" name="rad_bank"
					id="rad2_5" checked> <label for="rad2_5">우리은행</label>
				</li>
				<li class="sc"><input type="radio" name="rad_bank"
					id="rad2_6"> <label for="rad2_6">SC은행</label>
				</li>
				<li class="citi"><input type="radio" name="rad_bank"
					id="rad2_7"> <label for="rad2_7">한국씨티은행</label>
				</li>
				<li class="dgb"><input type="radio" name="rad_bank"
					id="rad2_8"> <label for="rad2_8">대구은행</label>
				</li>
				<li class="bnk"><input type="radio" name="rad_bank"
					id="rad2_9"> <label for="rad2_9">부산은행</label>
				</li>
				<li class="kj"><input type="radio" name="rad_bank"
					id="rad2_10" checked> <label for="rad2_10">광주은행</label>
				</li>
				<li class="jeju"><input type="radio" name="rad_bank"
					id="rad2_11"> <label for="rad2_11">제주은행</label>
				</li>
				<li class="jb"><input type="radio" name="rad_bank"
					id="rad2_12"> <label for="rad2_12">전북은행</label>
				</li>
				<li class="kn"><input type="radio" name="rad_bank"
					id="rad2_13"> <label for="rad2_13">경남은행</label>
				</li>
				<li class="kfcc"><input type="radio" name="rad_bank"
					id="rad2_14"> <label for="rad2_14">새마을금고</label>
				</li>
				<li class="cu"><input type="radio" name="rad_bank"
					id="rad2_15" checked> <label for="rad2_15">신협중앙회</label>
				</li>
				<li class="boa"><input type="radio" name="rad_bank"
					id="rad2_16"> <label for="rad2_16">BOA은행</label>
				</li>
				<li class="post"><input type="radio" name="rad_bank"
					id="rad2_17"> <label for="rad2_17">우체국</label>
				</li>
				<li class="hana"><input type="radio" name="rad_bank"
					id="rad2_18"> <label for="rad2_18">하나은행</label>
				</li>
				<li class="shinhan"><input type="radio" name="rad_bank"
					id="rad2_19"> <label for="rad2_19">신한은행</label>
				</li>
				<li class="k"><input type="radio" name="rad_bank"
					id="rad2_20" checked> <label for="rad2_20">케이뱅크</label>
				</li>
				<li class="kakao"><input type="radio" name="rad_bank"
					id="rad2_21"> <label for="rad2_21">카카오뱅크</label>
				</li>
				<li class="yuanta"><input type="radio" name="rad_bank"
					id="rad2_22"> <label for="rad2_22">유안타증권</label>
				</li>
				<li class="mirae"><input type="radio" name="rad_bank"
					id="rad2_23"> <label for="rad2_23">미래에셋대우</label>
				</li>
				<li class="samsung"><input type="radio" name="rad_bank"
					id="rad2_24"> <label for="rad2_24">삼성증권</label>
				</li>
				<li class="nhqv"><input type="radio" name="rad_bank"
					id="rad2_25" checked> <label for="rad2_25">NH투자증권</label>
				</li>
				<li class="kiwoom"><input type="radio" name="rad_bank"
					id="rad2_26"> <label for="rad2_26">키움증권</label>
				</li>
				<li class="daishin"><input type="radio" name="rad_bank"
					id="rad2_27"> <label for="rad2_27">대신증권</label>
				</li>
				<li class="hw"><input type="radio" name="rad_bank"
					id="rad2_28"> <label for="rad2_28">한화투자증권</label>
				</li>
				<li class="shiv"><input type="radio" name="rad_bank"
					id="rad2_29"> <label for="rad2_29">신한금융투자</label>
				</li>
				<li class="ug"><input type="radio" name="rad_bank"
					id="rad2_30" checked> <label for="rad2_30">유진투자증권</label>
				</li>
				<li class="meritz"><input type="radio" name="rad_bank"
					id="rad2_31" checked> <label for="rad2_31">메리츠 증권</label>
				</li>
			</ul>
		</div>

	</div>
</body>
</html>