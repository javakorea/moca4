<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /> 
<meta http-equiv="Pragma" content="no-cache" /> 
<meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT">
<meta http-equiv="Expires" content="-1" />
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>모바일 웹 온라인 소유권 이전</title>
<link rel="stylesheet" type="text/css" href="../css/mobile.css">
<script>
	var pass_num = '';
	moca.TOM_65_SRC.___ready = function(args){
		if(moca.getSs("loginInfo") == null || window.history.length < 3){
			location.href = '/to';
		};
		moca.setHistory('TOM_65',{'title':'계좌등록시결제비밀번호다시입력하기','time':(new Date()).getTime()});
		setTimeout(function(){
			$('#ipt_pass1').focus();
			if(window.BRIDGE != null){
				BRIDGE.showKeyPad();
			}
		},100);
	};

	function logKey (_obj) { 
		pass_num = _obj.value;
	  	for(var i=0; i < $('.pw_dot').length; i++){
	  		var ch = pass_num.charAt(i);
	  		var jq_o = $($('.pw_dot')[i]);
	  		if(ch != ''){
	  			if(!jq_o.hasClass('active')){
		  			jq_o.addClass('active');
	  			}
	  		}else{
	  			jq_o.removeClass('active');
	  		}
	  	}
	  	if(pass_num.length > 5){
	  		if(moca.getSs('Pay_Password') == pass_num){
	  			moca.setAs('Pay_Password_Re', pass_num);
		  		location.href = 'TOM_67.html';
	  		}else{
				moca.merror("결제비밀번호가 일치하지않습니다.","다시설정해주세요",function(){
					location.href = 'TOM_64.html';
				});
				return;
	  		}
	  	}
	};
	
	function focusMove(){
		$('#ipt_pass1').focus();
	};
	
	moca.TOM_65_SRC.back = function(){
		location.href = 'TOM_64.html';
	};
	moca.TOM_65_SRC.toCancel = function(){
		moca.mconfirm('소유권이전을 취소하시겠습니까?','',function(_result){
			if(_result == 'Y'){
				moca.TOM_65_SRC.exe({
					url : moca._domain+moca._contextRoot+"/TOM_60/mobile/cancelTransferOwner.do",
		            data : {
		            	"header" : moca.header,
		            	"body" : {
		            		Stage:"26",
		            		idx:moca.getSs("transferownerId")+""
		            	}
		            },		
					callback : function(response){
						
						if(response.error){
							moca.merror(response.error,'',function(){
								location.href='TOM_25.html?isCancel=true';
							});
						}else if(response.rePayResYn == 'N'){
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        		   location.href='TOM_25.html?isCancel=true';
			        	   });	
						}else{
							//polling후
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        	    	location.href='TOM_25.html?isCancel=true';
			        	    });	
						}

					}
				});
				
			}
		});
	};	
</script>
</head>
<body >
	<div class="wrap">
		<header class="titlebar">
			<button class="btn_back" type="button" onclick="moca.TOM_65_SRC.back()">이전페이지</button>
			<h2 class="tit"><a href="javascript:void(0)" onclick="moca.TOM_65_SRC.toCancel()">이전 취소</a></h2>
		</header>

		<div class="content fx2">
			<div class="top_txt">
				<p>
					다시한번<br>입력해주세요.
				</p>
			</div>
			<div class="lo_form">
				<div class="pw_box">
					<div class="pw_dot">
						<input type="number" pattern="\d*" placeholder="number" name="ipt_pass1" id="ipt_pass1" maxlength="6" onkeyup="logKey(this)">
					</div>
					<div class="pw_dot">
						<input type="number" name="ipt_pass" id="ipt_pass" maxlength="1" onfocus="focusMove()">
					</div>
					<div class="pw_dot">
						<input type="number" name="ipt_pass" id="ipt_pass" maxlength="1" onfocus="focusMove()">
					</div>
					<div class="pw_dot">
						<input type="number" name="ipt_pass" id="ipt_pass" maxlength="1" onfocus="focusMove()">
					</div>
					<div class="pw_dot">
						<input type="number" name="ipt_pass" id="ipt_pass" maxlength="1" onfocus="focusMove()">
					</div>
					<div class="pw_dot">
						<input type="number" name="ipt_pass" id="ipt_pass" maxlength="1" onfocus="focusMove()">
					</div>
				</div>
			</div>
		</div>

	</div>
</body>
</html>