<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" /> 
<meta http-equiv="Pragma" content="no-cache" /> 
<meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT">
<meta http-equiv="Expires" content="-1" />
<meta name="viewport"
	content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>모바일 웹 온라인 소유권 이전</title>
<link rel="stylesheet" type="text/css" href="../css/mobile.css">
<script>
	moca.TOM_75_SRC.___ready = function(args){
		if(moca.getSs("loginInfo") == null || window.history.length < 3){
			location.href = '/to';
		};
		moca.setHistory('TOM_75',{'title':'계좌등록본인인증','time':(new Date()).getTime()});
		
		moca.setValueById("custnm",moca.getSs("bankOwner"));
 		if(moca.getSs("loginInfo") != null && (moca.getSs("loginInfo").name.indexOf('김세창') > -1 || moca.getSs("loginInfo").name.indexOf('성혜진') > -1)){
			moca.setValueById("phoneno","01091168072");
			moca.setValueById("birthday","19721007");
			moca.setValueById("custnm","김세창");
			moca.setCheckByNameIndex('nation',0,true);
			moca.setCheckById('rad1_0',true);
			moca.setCheckByNameValue('telecd','05',true);
		}
 		/*
 		else if(moca.getSs("loginInfo") != null && moca.getSs("loginInfo").name.indexOf('이지선') > -1){
			moca.setValueById("phoneno","01055978223");
			moca.setValueById("birthday","19820203");
			moca.setValueById("custnm","이지선");
			moca.setCheckByNameIndex('nation',0,true);
			moca.setCheckById('rad1_1',true);
			moca.setCheckByNameValue('telecd','03',true);
		}else if(moca.getSs("loginInfo") != null && moca.getSs("loginInfo").name.indexOf('박민성') > -1){
			moca.setValueById("phoneno","01044254255");
			moca.setValueById("birthday","19850426");
			moca.setValueById("custnm","박민성");
			moca.setCheckByNameIndex('nation',0,true);
			moca.setCheckById('rad1_0',true);
			moca.setCheckByNameValue('telecd','03',true);
		};
		*/
	};
	function go(){
		if(!moca.isCheckedById('cbx_0')){
			moca.malert('휴대폰 본인인증 서비스에 동의해주세요!');
			return;
		};
    	
		moca.TOM_75_SRC.exe({
    		url : moca._domain+moca._contextRoot+"/TOM_74/mobile/verifyOneself.do",
    		loadingbar:true,
    		loadingInfo:{type:"mobile",className:"_modal",content:"<span>잠시만 기다려주세요!</span>"},
            data : {
            	"header" : moca.header,
            	"body" : {
            		"phoneno":moca.getValueById("phoneno"),
            		"birthday":moca.getValueById("birthday"),
            		"custnm":moca.getValueById("custnm"),
            		"nation":moca.getValueByCheckedName("nation"),
            		"gender":moca.getValueByCheckedName("gender"),
            		"telecd":moca.getValueByCheckedName("telecd")
            	}
            },			
    		callback : function(response){
    			if(response.verifyResMap.reply == "0000"){
    				var userPayInfo = {};
    				userPayInfo.phoneno = moca.getValueById("phoneno");
    				userPayInfo.birthday = moca.getValueById("birthday");
    				userPayInfo.custnm = moca.getValueById("custnm");
    				userPayInfo.nation = moca.getValueByCheckedName("nation");
    				userPayInfo.gender = moca.getValueByCheckedName("gender");
    				userPayInfo.telecd = moca.getValueByCheckedName("telecd");
    				userPayInfo.trace_no = response.verifyResMap.trace_no;
    				moca.setAs("userPayInfo",userPayInfo);
    				moca.setAs("verifyResMap",response.verifyResMap);
    				location.href="TOM_80.html";
    			}else{
    				moca.merror(response.verifyResMap.reply_msg);
    			};
    		}
    	});		
		
	};
	moca.TOM_75_SRC.allchk = function(_thisObj){
		if(moca.isCheckedByObj(_thisObj)){
			moca.setCheckByClass("chk",true);
		}else{
			moca.setCheckByClass("chk",false);
		}
	};
	moca.TOM_75_SRC.onechk = function(_thisObj){
		if(!moca.isCheckedByObj(_thisObj)){
			moca.setCheckById("cbx_0",false);
		}else{
			if(moca.isAllCheckedByClass("chk")){
				moca.setCheckById("cbx_0",true);
			}else{
				moca.setCheckById("cbx_0",false);
			}
		}
	};	
	
	moca.TOM_75_SRC.toCancel = function(){
		moca.mconfirm('소유권이전을 취소하시겠습니까?','',function(_result){
			if(_result == 'Y'){
				moca.TOM_75_SRC.exe({
					url : moca._domain+moca._contextRoot+"/TOM_60/mobile/cancelTransferOwner.do",
		            data : {
		            	"header" : moca.header,
		            	"body" : {
		            		Stage:"26",
		            		idx:moca.getSs("transferownerId")+""
		            	}
		            },		
					callback : function(response){
						
						if(response.error){
							moca.merror(response.error,'',function(){
								location.href='TOM_25.html?isCancel=true';
							});
						}else if(response.rePayResYn == 'N'){
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        		   location.href='TOM_25.html?isCancel=true';
			        	   });	
						}else{
							//polling후
			        	    moca.mresult('성공적으로 취소되었습니다!','',function(){
			        	    	location.href='TOM_25.html?isCancel=true';
			        	    });	
						}

					}
				});
			}
		});
	};
	
	moca.TOM_75_SRC.back = function(){
		location.href = 'TOM_69.html';
	};
	
</script>
</head>
<body>
	<div class="wrap">
		<header class="titlebar">
			<button class="btn_back" type="button" onclick="moca.TOM_75_SRC.back()">이전페이지</button>
			<h2 class="tit"><a href="javascript:void(0)" onclick="moca.TOM_75_SRC.toCancel()">이전 취소</a></h2>
		</header>

		<div class="content btn_cont fx">
			<div class="top_txt">
				<p>본인인증</p>
			</div>
			<ul class="d_form" style="padding:0px">
				<li>
					<div class="gox">
						<input class="input_frm" type="text" placeholder="이름" value="" id="custnm" >
						<!-- <button class="btn_clear" type="button">삭제</button> -->
					</div>					
				</li>
				<li>
					<ul class="rad_ck">
						<li><input type="radio" name="nation" id="rad0_0" checked value="1"> <label
							for="rad0_0">내국인</label></li>
						<li><input type="radio" name="nation" id="rad0_1" value="2"> <label
							for="rad0_1">외국인</label></li>
					</ul>
				</li>
				<li>
					<div class="gox">
						<input class="input_frm" type="tel" placeholder="생년월일(8자리)" id="birthday" maxLength="8">
						<button class="btn_clear" type="button">삭제</button>
					</div>
				</li>
				<li>
					<ul class="rad_ck">
						<li><input type="radio" name="gender" id="rad1_0" checked value="1"> <label
							for="rad1_0">남성</label></li>
						<li><input type="radio" name="gender" id="rad1_1"  value="2"> <label
							for="rad1_1">여성</label></li>
					</ul>
				</li>
				<li>
					<ul class="rad_ck2">
					<!-- 01:SKT, 02:KT, 03:LGU, 04:SKT알뜰폰, 05:KT알뜰폰,06:LGU알뜰폰 -->
						<li><input type="radio" name="telecd" value="01"
							id="rad2_0"checked> <label for="rad2_0">SKT</label>
						</li>
						<li><input type="radio" name="telecd"  value="02"
							id="rad2_1"> <label for="rad2_1">KT</label>
						</li>
						<li><input type="radio" name="telecd" value="03"
							id="rad2_2"> <label for="rad2_2">LG</label>
						</li>
						<li><input type="radio" name="telecd" value="04"
							id="rad2_3"> <label for="rad2_3">SKT알뜰</label>
						</li>
						<li><input type="radio" name="telecd" value="05"
							id="rad2_4"> <label for="rad2_4">KT알뜰폰</label>
						</li>
						<li><input type="radio" name="telecd" value="06"
							id="rad2_5"> <label for="rad2_5">LG알뜰폰</label>
						</li>												
					</ul>
				</li>
				<li>
					<div class="ly_form">
						<input class="input_frm" type="tel" placeholder="휴대폰 번호 입력" value="" id="phoneno" maxLength="11">
						<!-- <button class="btn_in" type="button">인증받기</button> -->
					</div>
				</li>

			</ul>
			<div class="agree_cbx type1" style="padding:30px 0">
				<div class="cbx_item all">
					<input type="checkbox" id="cbx_0" checked onclick="moca.TOM_75_SRC.allchk(this)"> 
					<label class=""	for="cbx_0" >휴대폰 본인인증 서비스 동의</label>
				</div>
				<ul class="cbx_list">
					<li class="cbx_item">
						<input type="checkbox" id="cbx_1" class='chk' checked  onclick="moca.TOM_75_SRC.onechk(this)">
						<label class="" for="cbx_1">통신사 이용약관 동의(필수)</label>
						<button class="btn_more" type="button"></button></li>
					<li class="cbx_item">
						<input type="checkbox" id="cbx_2" class='chk' checked  onclick="moca.TOM_75_SRC.onechk(this)">
						<label class="" for="cbx_2">개인정보 제공동의(필수)</label>
						<button class="btn_more" type="button"></button></li>
				</ul>

			</div>
		</div>
		<div class="btn_btm">
			<button class="btn_go" type="button" onclick="go()">인증</button>
		</div>
	</div>

</body>
</html>